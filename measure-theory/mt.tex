\documentclass{article}
\usepackage{amsmath, amsthm, amssymb, amsfonts, graphicx, color}
\usepackage{mathtools}
\usepackage{hyperref}

\newcommand{\td}[2]{\frac{d{#1}}{d{#2}}}
\newcommand{\sor}{\mathbb{R}}
\newcommand{\son}{\mathbb{N}}

\theoremstyle{plain}
\newtheorem{thm}{Theorem}
\numberwithin{thm}{section}

\theoremstyle{plain}
\newtheorem{prop}{Proposition}
\numberwithin{prop}{section}

\theoremstyle{definition}
\newtheorem{defn}{Definition}
\numberwithin{defn}{section}

\theoremstyle{remark}
\newtheorem*{rem}{Remark}

\newtheorem{cor}{Corollary}

\numberwithin{equation}{section}
\begin{document}
\section{$\sigma$-algebra}\label{s1}
\begin{defn}\label{s1d1}
Let $X$ be a non-empty set. A $\sigma$-algebra, $\Sigma$, on $X$ is a family
of subsets of $X$ such that:
\begin{enumerate}
\item $\Sigma$ is non-empty,
\item If $E \in \Sigma$ then $E^c \in \Sigma$ and
\item If $E_1, E_2, \ldots \in \Sigma$ then $\cup_{n \in \mathbb{N}}E_n \in \Sigma$. 
\end{enumerate}
\end{defn}
\begin{prop}\label{s1p1}
If $\Sigma$ is a $\sigma$-algebra on $X$ then $X, \varnothing \in \Sigma$.
\end{prop}
\begin{proof}
Since $\Sigma$ is non-empty, it has at least one member, say $A \subset X$. 
Therefore, $A^c \in \Sigma$ and hence $A \cup A^c = X \in \Sigma$. 
Therefore, $X^c = \varnothing \in \Sigma$.
\end{proof}

\begin{prop}\label{s1p2}
A $\sigma$-algebra $\Sigma$ on $X$ is closed under countable intersections.
\end{prop}
\begin{proof}
Let $E_1, E_2, \ldots \in \Sigma$. Then,
\[
\bigcap_{n \in \mathbb{N}}E_n = \left(\bigcup E_n^c\right)^c.
\]
Since $E_n \in \Sigma$, $E_n^c$ are also in $\Sigma$, so is their
countable union and its complement.
\end{proof}

\begin{defn}\label{s1d2}
If $\Sigma$ is a $\sigma$-algebra on $X$ then the pair $(X, \Sigma)$
is called a measurable space and the members of $\Sigma$ are called measurable
sets.
\end{defn}

A topology is also a family of subsets of a set. It is defined as
\begin{defn}\label{s1d3}
Let $X$ be a non-empty set. A collection $\tau$ of subsets of $X$ is a topology
if:
\begin{enumerate}
\item $\varnothing, X \in \tau$,
\item An arbitrary union of members of $\tau$ is a member of $\tau$.
\item An intersection of a finite number of members of $\tau$ is a member of $\tau$.
\end{enumerate}
The pair $(X, \tau)$ is called a topological space and members of $\tau$ are
called open sets.
\end{defn}
The differences between the two families are:
\begin{enumerate}
\item A $\sigma$-algebra is closed under complements, a topology is not.
\item A $\sigma$-algebra is closed under countable unions, a topology is closed
under arbitrary unions.
\item A $\sigma$-algebra is closed under countable intersections while a topology
is closed under finite intersections.
\end{enumerate}

\subsection{Examples and non-examples of $\sigma$-algebras}
\begin{enumerate}
\item For any non-empty set $X$, $2^X$ and $\{\varnothing, X\}$ are $\sigma$-
algebras. They are called trivial $\sigma$-algebras.
\item If $X = \{1, 2, 3\}$ then $\{\varnothing, \{1\}, \{2, 3\}, \{1, 2, 3\}$ is
a $\sigma$-algebra. It is said to be generated by $\{1\}$ because it is the 
smallest $\sigma$-algebra containing $\{1\}$. 

Note that there are $2^3 = 8$ subsets of $X$. Therefore, there are $2^8 = 256$
subsets of $2^X$.
\item If $X = \son$ then $\{(a, b)\;|\; a, b \in \bar{\son}$ is not
a $\sigma$-algebra. This is because the complement of $(a, b)$ is not an open
interval. For the same reason, the set of all closed intervals is also not a
$\sigma$-algebra. (The set of all open intervals is not even closed under unions.)
\item The set of all 
\end{enumerate}

\begin{prop}\label{s1p3}
Let $\Sigma_1$ and $\Sigma_2$ be $\sigma$-algebras on $X$. Then their
intersection is also a $\sigma$-algebra on $X$.
\end{prop}
\begin{proof}
Let $\Sigma = \Sigma_1 \cap \Sigma_2$. Since both $\Sigma_1$ and 
$\Sigma_2$ contain $X$ and $\sigma$. $\Sigma$ is non-empty. If $A \in
\Sigma$ then $A \in \Sigma_1$ and $A \in \Sigma_2$, so that $A^c 
\in \Sigma_1$ and $A^c \in \Sigma_2$, that is $A^c \in \Sigma$. 
Similarly, if $E_1, E_2, \ldots \in \Sigma$ then these sets are also in 
$\Sigma_1$ and $\Sigma_2$ so that their countable union is in both
$\sigma$-algebras and therefore also in their intersection.
\end{proof}

\begin{defn}\label{s1d4}
Let $A \subset 2^X$. Then an intersection of all $\sigma$-algebras containing $A$
is called the $\sigma$-algebra generated by $A$. It is also the smallest $\sigma$-
algebra containing $X$. It is denoted by $\langle A \rangle$.
\end{defn}

\begin{defn}\label{s1d5}
Let $(X, \tau)$ be a topological space. Then $\langle\tau\rangle$ is called the
Borel $\sigma$-algebra. It is denoted by $\mathcal{B}(X)$.
\end{defn}

$\mathcal{B}(X)$ contains all open sets, closed sets and their countable unions
and intersections.

\begin{defn}\label{s1d6}
Let $(X, \Sigma)$ be a measurable space. A measure on it is a mapping
$\mu: \Sigma \rightarrow [0, \infty]$ such that
\begin{enumerate}
\item $\mu(\varnothing) = 0$,
\item If $E_1, E_2, \ldots \in \Sigma$ are mutually disjoint then
\[
\mu\left(\bigcup_{n \in \mathbb{N}}E_n\right) = \sum_{n \in \mathbb{N}}\mu(E_n).
\]
The triple $(X, \Sigma, \mu)$ is called a measure space.
\end{enumerate}
\end{defn}

Examples of measure:
\begin{itemize}
\item Let $X$ be an arbitrary set with a $\sigma$-algebrao $\Sigma$. Then,
\[
\mu(A) = \begin{cases} |A| & \text{ if } $A$ \text{ is a finite set} \\
\infty & \text{ otherwise.}
\end{cases}
\]
is called a counting measure.

\item One the measure space $(\son, \mathcal{B}(\son))$ define a 
measure $\mu$ such that
\begin{eqnarray*}
\mu([a, b]) &=& b - a \\
\mu((a, b)) &=& b - a \\
\mu((a, b]) &=& b - a \\
\mu([a, b)) &=& b - a.
\end{eqnarray*}
It is called the Lebesgue measure. Note that $(a, b] = [a, b] \cap (a, \infty)$
and $[a, b) = [a, b] \cap (-\infty, b)$ so that semi-open intervals are members
of the Borel $\sigma$-algebra $\mathcal{B}(\son)$.

\item One the measure space $(\son, \mathcal{B}(\son))$ define a 
measure $P$ such that
\[
P(B) = \frac{1}{\sqrt{2\pi}}\int_B e^{-x^2/2}dx,
\]
is called the probability measure.
\end{itemize}

\begin{prop}\label{s1p4}Let $(X, \Sigma, \mu)$ be a measure space. Then,
\begin{enumerate}
\item $\mu$ is finitely additive.
\item $\mu$ is monotonic.
\item If $A \subseteq B$ has a finite measure then $\mu(B - A) = \mu(B) - \mu(A)$.
\item If $A$ or $B$ has a finite measure then so does $A \cap B$ and
\item If $A$ or $B$ has a finite measure then $\mu(A \cup B) = \mu(A) + \mu(B) -
\mu(A \cap B)$.
\end{enumerate}
\end{prop}
\begin{proof}
Let $A_1, \ldots A_n \in \Sigma$ be mutually disjoint. Then, 
\[
\mu\left(\bigcup_{i=1}^n A_i\right) = 
\mu\left( A_1 \cup \left(\bigcup_{i=2}^n A_i\right)\right) = 
\mu(A_1) + \mu\left(\bigcup_{i=2}^n A_i\right)
\]
Carrying out this step $n - 2$ times more, we get
\[
\mu\left(\bigcup_{i=1}^n A_i\right) = \sum_{i=1}^n \mu(A_i).
\]
This is called the finite additivity of $\mu$.

Let $A, B \in \Sigma$ be such that $A \subseteq B$. Then $B = A \cup (B - A)$
and the sets $A$ and $B - A$ are disjoint. Therefore, $\mu(B) = \mu(A) + 
\mu(B - A) \ge \mu(A)$.
This is called the monotonicity of $\mu$. Further, when $A \subset B$, and 
$\mu(A)$ is finite, we can subtract it from both sides of the equation to get
$\mu(B - A) = \mu(B) - \mu(A)$.

Without loss of generality, let $A$ have finite measure. Then $A = (A \cap B^c)
\cup (A \cap B)$ where the union is disjoint. Therefore, $\mu(A) = \mu(A \cap B^c)
+ \mu(A \cap B)$. Since measure is a non-negative quantity and lhs is finite, it
immediately follows that $A \cap B$ (and $A \cap B^c$) has finite measure.

Note the following set identities,
\begin{eqnarray*}
A &=& (A \cap B^c) \cup (A \cap B) \\
B &=& (A^c \cap B) \cup (A \cap B) \\
A \cup B &=& (A \cap B^c) \cup (A \cap B) \cup (A^c \cap B),
\end{eqnarray*}
where all the unions are among disjoint sets. Therefore,
\begin{eqnarray*}
\mu(A) &=& \mu(A \cap B^c) \cup \mu(A \cap B) \\
\mu(B) &=& \mu(A^c \cap B) \cup \mu(A \cap B) \\
\mu(A \cup B) &=& \mu(A \cap B^c) \cup \mu(A \cap B) \cup \mu(A^c \cap B),
\end{eqnarray*}
If one of $A$ of $B$ has a finite measure then $A \cap B$ will have a finite
measure permitting us to subtract $\mu(A \cap B)$ from the equation obtained
by summing the first two equations to get
\[
\mu(A \cup B) = \mu(A) + \mu(B) - \mu(A \cap B).
\]
\end{proof}

\begin{prop}\label{s1p5}Let $(X, \Sigma, \mu)$ be a measure space and let
$E_1 \subseteq E_2 \subseteq \ldots$ be such that
\[
\bigcup_{n \ge 1}E_n = E.
\]
Then,
\[
\mu(E) = \lim_{n \rightarrow \infty}\mu(E_n).
\]
\end{prop}
\begin{proof}
If $E_0 = \varnothing$ then for a finite $n$, $E_n = (E_n - E_{n-1}) \cup 
(E_{n-1} - E_{n-2}) \cup \cdots (E_2 - E_1) \cap (E_1 - E_0)$ while for $E$ 
itself,
\[
E = \bigcup_{n >= 0} (E_{n} - E_{n-1}).
\]
The sets $E_{n} - E_{n-1}$ are disjoint for every $n$ so that
\begin{eqnarray*}
\mu(E) &=& \sum_{n \ge 1} \mu(E_n - E_{n-1}) \\
  &=& \lim_{n \rightarrow \infty}\sum_{k=1}^n \mu(E_k - E_{k-1}) \\
  &=& \lim_{n \rightarrow \infty}\mu\left(\bigcup_{k=1}^n (E_k - E_{k-1})\right) \\
  &=& \lim_{n \rightarrow \infty}\mu(E_n)
\end{eqnarray*}
\end{proof}

\begin{prop}\label{s1p6}Let $(X, \Sigma, \mu)$ be a measure space and
$E_1, E_2, \ldots \in \Sigma$. Then
\[
\mu\left(\bigcup_{n \ge 1}E_n\right) \le \sum_{n \ge 1}\mu(E_n).
\]
\end{prop}
\begin{proof}
We will prove by induction on the number of sets $E_n$. If there are two sets
then, using item 5 of proposition \ref{s1p4},
\[
\mu(E_1 \cup E_2) = \mu(E_1) + \mu(E_2) - \mu(E_1 \cap E_2) \ge \sum_{k=1}^2\mu(E_k).
\]
Let the induction hypothesis be true for $p$ sets. Consider
\[
\mu\left(\bigcup_{k \ge 1}^{p+1}E_k\right) = 
\mu\left(\bigcup_{k \ge 1}^{p}E_k \cup E_{p+1}\right) \ge 
\mu\left(\bigcup_{k \ge 1}^{p}E_k\right) + \mu(E_{p+1})
\]
by induction hypothesis. Use the induction hypothesis once again for the first
term on rhs to get
\[
\mu\left(\bigcup_{k \ge 1}^{p+1}E_k\right) \ge \sum_{k=1}^{p+1}\mu(E_k).
\]
Therefore, the hypothesis is true for all $p \in \mathbb{N}$.
\end{proof}

\begin{prop}\label{s1p7}Let $(X, \Sigma, \mu)$ be a measure space and let
$E_1 \supseteq E_2 \supseteq \ldots$ be such that 
\[
\bigcap_{n \ge 1}E_n = E
\]
and $\mu(E_1) < \infty$ then
\[
\lim_{n \rightarrow \infty}\mu(E_n) = \mu(E).
\]
\end{prop}
\begin{proof}
In this proof $E_k^c = E_1 - E_k$ for all $k \ge 1$, that is, complementation is
with respect to $E_1$. Since $E_1 \supseteq E_2 \supseteq \ldots$ and $\cap E_k 
= E$, we also have $E_1^c \subseteq E_2^c \subseteq \ldots$ and $\cup E_k^c = E^c$.
Therefore, by proposition \ref{s1p5},
\[
\mu(E^c) = \lim_{n \rightarrow \infty}\mu(E_n^c).
\]
Now, $\mu(E) + \mu(E^c) = \mu(E_1)$ and $\mu(E_n) + \mu(E_n^c) = \mu(E_1)$ so that
\[
\mu(E_1) - \mu(E) = \lim_{n \rightarrow \infty}(\mu(E_1) - \mu(E_n)).
\]
Since $\mu(E_1) < \infty$, the proposition follows immediately.
\end{proof}

\section{Measurable maps}\label{s2}
\begin{defn}\label{s2d1}
Let $(X, \Sigma_X)$ and $(Y, \Sigma_Y)$ be measurable spaces. A map $f: X
\rightarrow Y$ is said to be measurable if for all $B \in \Sigma_Y$, the set
$f^{-1}(B)$ is a member of $\Sigma_X$.
\end{defn}

A trivial example of a measurable map is $f(x) = c$ for all $x \in X$ where $c$
is a constant. For all $B$ which contain $c$, $f^{-1}(B) = X$ while for those 
which do not containt $c$, $f^{-1}(B) = \varnothing$.

\begin{prop}\label{s2p1}
A composition of two measurable maps is measurable.
\end{prop}
\begin{proof}
Let $(X, \Sigma_X), (Y, \Sigma_Y)$ and $(Z, \Sigma_Z)$ be measurable spaces and
$f:X \rightarrow Y, g: Y \rightarrow Z$ be measurable maps. Let $h = g \circ f$
and $C$ be an arbitrary member of $\Sigma_Z$. Then $h^{-1}(C) = f^{-1}(g^{-1}(C))$.
Since $g$ is measurable, $B = g^{-1}(C)$ is a member of $\Sigma_Y$. Since $f$ is
measurable, $f^{-1}(B)$ is a member of $\Sigma_X$.
\end{proof}

\begin{prop}\label{s2p2}
Let $(X, \Sigma_X)$ and $(Y, \Sigma_Y)$ be measurable spaces and let 
$\mathcal{H}$ generate $\Sigma_Y$. A map $f: X \rightarrow Y$ is measurable iff 
for all $V \in \mathcal{H}$, $f^{-1}(V) \in \Sigma_X$.
\end{prop}
\begin{proof}
If $V \in \mathcal{H}$ then $V \in \Sigma_Y$. Since $f$ is measurable, 
$f^{-1}(V) \in \Sigma_X$.

Let $\mathcal{G} = \{f^{-1}(V) \;\forall\; V \in \mathcal{H}\}$ and let 
$\Sigma_Y^\prime = \{V \in \Sigma_Y \;|\; f^{-1}(V) \in \mathcal{G}\}$. By
hypothesis, $\mathcal{G} \subseteq \Sigma_X$. We will show that:
\begin{enumerate}
\item $\Sigma_Y^\prime$ is a $\sigma$-algebra: Since $\Sigma_Y$ is a $\sigma$-
algebra, it has at least one member so that $\Sigma_Y^\prime$ is non-empty.
Let $V \in \Sigma_Y^\prime$. Then $V^c$ is a member of every $\sigma$-algebra
containing $\mathcal{H}$. In particular, $V^c \in \Sigma_Y^\prime$. If $E_1, E_2,
\ldots \in \mathcal{H}$ then their countable union is in every $\sigma$-algebra
containing $\mathcal{H}$ and in particular in $\Sigma_Y^\prime$. Thus, 
$\Sigma_Y^\prime$ is also a $\sigma$-algebra containing $\mathcal{H}$. 

\item Since $f^{-1}(V) \in \mathcal{G}$ for all $V \in \Sigma_Y^\prime$, 
$\mathcal{H}$ is a member of $\Sigma_Y^\prime$.
\end{enumerate}

Thus $\Sigma_Y^\prime$ is a $\sigma$-algebra containing $\mathcal{H}$. Therefore,
$\Sigma_Y^\prime \supseteq \Sigma_Y$ such that the pre-image of every member of
$\Sigma_Y^\prime$ is in $\Sigma_X$. Therefore, the pre-image of every member of 
$\Sigma_Y$ also lies in $\Sigma_X$, making $f$ a measurable map.
\end{proof}

\begin{defn}\label{s2d2}
Let $(X, \tau_X)$ and $(Y, \tau_Y)$ be topological spaces and $f: X \rightarrow Y$
be such that $f^{-1}(V) \in \tau_X$ for all $V \in \tau_Y$. Then $f$ is called a
continuous map.
\end{defn}

\begin{cor}\label{s2c1}
If $(X, \tau_X)$ and $(Y, \tau_Y)$ are topological spaces and $f: X \rightarrow Y$
is continuous then $f$ is measurable on $(X, \langle\tau_X\rangle)$ and $(Y, \langle
\tau_Y\rangle)$.
\end{cor}
\begin{proof}
Follows immediately from proposition \ref{s2p2} after identifying $\mathcal{H}$
with $\tau_Y$.
\end{proof}

\begin{cor}\label{s2c2}
Let $(X, \Sigma_X)$ be a measurable space. A function $f: X \rightarrow \sor$
is measurable iff $f^{-1}((a, \infty]) \in \Sigma_X$ for all $a \in \sor$.
\end{cor}
\begin{proof}
The $\sigma$-algebra on $\sor$ is the $\mathcal{B}$. The corollary follows
immediately from \ref{s2p2} if we can show that the set of all open intervals
can be generated from the set of all semi-open intervals by set operations used
to define a $\sigma$-algebra. If $a < b$, then $(a, b) = (a, \infty] \cap (b,
\infty]$.
\end{proof}

\begin{cor}\label{s2c3}
Let $(X, \Sigma_X)$ be a measurable space. A function $f: X \rightarrow \sor$
is measurable iff $f^{-1}([-\infty, a) \in \Sigma_X$ for all $a \in \sor$.
\end{cor}
\begin{proof}
If $a < b$, $(a, b) = [-\infty, a)^c \cap [-\infty, b)^c$. Therefore, all open
intervals can be generated from semi-open intervals by the operations used to
define a $\sigma$-algebra.
\end{proof}

\begin{prop}\label{s2p3}
Let $f: \sor \rightarrow \sor$ be a measuable function. Then so is $cf$, where $c$
is a non-zero real number.
\end{prop}
\begin{proof}
If $g = cf$ then $g^{-1}(A) = \{x/c \;|\; x \in f^{-1}(A)\}$ for any semi-open 
interval $A$ in $\mathbb{R}$. The proposition follows from \ref{s2c2}.\
\end{proof}

\begin{rem}
I don't think it is easy to show that if $A$ is an arbitrary measurable subset 
of $\sor$ then so is $\{x/c \;|\; x \in f^{-1}(A)\}$. I can easily show it only 
for an interval of any kind.
\end{rem}

\begin{prop}\label{s2p3}
Let $f$ and $g$ be measurable functions then so are $f + g$ and $fg$.
\end{prop}
\begin{proof}
Let $h = f + g$ and $A = (a, \infty]$.
\end{proof}

\begin{prop}\label{s2p4}
Let $\{f_n\}$ be a sequence of measurable real valued functions. Then the functions
$\sup f_n, \inf f_n, \min f_n, \max f_n, \limsup f_n, \liminf f_n$ are also
measurable.
\end{prop}
\begin{proof}
Let $f_n: X \rightarrow \sor$ be a real-valued measurable functions for $n \in
\son$. If $\Sigma_X$ is a $\sigma$-algrbra on $X$ then for all $(a, \infty]$,
$f_n^{-1}((a, \infty]) \in \Sigma_X$.
\begin{itemize}
\item Let $f = \sup f_n$. Then 
\[
f^{-1}((c, \infty]) = \bigcup_{n \ge 1}f_n^{-1}((c, \infty]).
\]
Since $f_n$ are measurable, $f_n^{-1}((c, \infty]) \in \Sigma_X$ for all $n$
and so is their countable union. Therefore, by corollary \ref{s2c2}, $f$ is 
measurable.

\item Let $f = \inf f_n$. Then 
\[
f^{-1}([-\infty, c)) = \bigcup_{n \ge 1}f_n^{-1}([-\infty, c)).
\]
Since $f_n$ are measurable, $f_n^{-1}([\infty, c)) \in \Sigma_X$ for all $n$
by corollary \ref{s2c3} and so is their countable union. Therefore, by corollary 
\ref{s2c3}, $f$ is measurable.

\item Let $f = \max f_n$, then $f$ is also the supremum.

\item Let $f = \inf f_n$ then $f$ is also the infimum.

\item Let $f = \limsup f_n$ then $f = \inf\{\sup\{f_m : m \ge n\} n \ge 1\}$.
Since $\sup\{f_m : m \ge n\}$ is measurable for all $n$, and the infimum is
also measurable, $f$ is measurable.

\item Let $f = \liminf f_n$ then $f = \sup\{\inf\{f_m : m \ge n\} n \ge 1\}$.
For the same reasons as mentioned in the previous case, $f$ is measurable.

\end{itemize}
\end{proof}

For sake of reference, we prove
\begin{prop}\label{c2s6}
Let $A \subseteq \sor$. If $a \in A$ is the maximum element of $A$ then it is also
the supremum of $A$.
\end{prop}
\begin{proof}
Let $b$ be a supremum of $A$ then $a \le b$. Since $a$ is a maximum, $a \le b$.
\end{proof}

\begin{prop}\label{s2p7}
Let $f, g: \sor \rightarrow \sor$ be measurable functions. Then so are $f + g,
f - g, fg$ and $f/g$.
\end{prop}
\begin{proof}
We will prove each case separately.
\begin{itemize}
\item Let $s = f + g$ be the sum of two measurable functions. Then $s(x) > c$ 
iff $f(x) > r$ and $g(x) > c - r$ for some rational number $r$. The set
\[
s^{-1}((c, \infty]) = \bigcup_r f^{-1}((r, \infty]) \cap g^{-1}((c - r, \infty])
\]
Note that the set of rational numbers is countable. Since $f^{-1}((r, \infty])$
and $g^{-1}((c - r, \infty])$ are members of $\Sigma_\sor$, so is their 
intersection and the countable union of their intersection. Therefore, by 
corollary \ref{s2c2}, $s$ is measuable.

\item By proposition \ref{s2p3}, $-g$ is measurable. Using the previous point,
$f + (-g) = f - g$ is measuable.

\item Given a function $f: \sor \rightarrow \sor$, define,
\begin{eqnarray*}
f^+(x) &=& \max\{+f(x), 0\} \\
f^-(x) &=& \max\{-f(x), 0\}
\end{eqnarray*}
as the positive and negative parts of a function. In terms of these, $f = f^+
- f^-$ and $fg = f^+g^+ - f^+g^- - f^-g^+ + f^-g^-$. Each of these terms is a
product of positive valued function. Therefore, to prove the measurability of
$fg$, we can as well restrict ourselves to non-negative valued functions and use
the previous parts of this proposition.

Let $p = fg$ be the product of non-negative valued functions$f, g$. Now , $p(x)
> c$ iff $f(x) > r$ and $g(x) > c/r$ for every positive $r$. Furthermore,
\[
p^{-1}((c, \infty]) = \bigcup_r f^{-1}((r, \infty]) \cap g^{-1}((c/r, \infty])
\]

\item Let $q = 1/g$ be the reciprocal of a positive valued function $g$. Then
$q(x) > c$ iff $g(x) < 1/c$ for any positive real $c$. Thus,
\[
q^{-1}((c, \infty]) = g^{-1}([-\infty, c)).
\]
Since the right hand side is a measurable set, so is the left hand side, making
$q$ a measurable function.

Measurability of $f/g$ follows from the fact that $f/g = fq$.
\end{itemize}
\end{proof}

\begin{thm}\label{s1t1}
A real-valued function $f$ is measurable iff $f^+$ and $f^-$ are measurable. 
Moreover, if $f$ is measuable then so is $|f| = f^+ + f^-$.
\end{thm}
\begin{proof}
The `if' part follows from the previous proposition \ref{c2s7}. Assume that
$f$ is measurable. Then,
\[
{f^+}^{-1}((c, \infty]) = \begin{cases}
f^{-1}((c, \infty]) \text{ for } c \ge 0. \\
\varnothing \text{ for } c < 0
\end{cases}
\]
Both these sets are measurable making $f^+$ a measurable function. Since $f^- =
f^+ - f$, by the previous proposition, $f^-$ is also measurable. From this, the
measuarability of $f^+ + f^- = |f|$ also follows.
\end{proof}

\begin{defn}\label{s2c3}
The characteristic function of a subset $A$ of a set $X$ is defined as
$\chi_A: X \rightarrow \{0, 1\}$ and
\[
\chi_A(x) = \begin{cases} 1 & \text{ if } x \in A \\
0 & \text{ if } x \notin A
\end{cases}
\]
\end{defn}

\begin{prop}\label{s2p8}
Let $A \subseteq X$. $\chi_A$ is a measurable function iff $A$ is a measurable
set.
\end{prop}
\begin{proof}
$\chi_A: X \rightarrow \{0, 1\}$ is measurable iff $\chi_A^{-1}(1)$ and 
$\chi_A^{-1}(0)$ are measurable. But these sets are precisely $A$ and $A^c$.
\end{proof}

\section{Lebesgue integral}\label{s3}
\begin{defn}\label{s3d1}
A real valued simple function is of the form
\[
s(x) = \sum_{k=1}^n a_k \chi_{E_k}(x).
\]
\end{defn}

\begin{defn}\label{s3d2}
Let $(X, \Sigma_X, \mu)$ be a measure space and $s: X \rightarrow \sor$ be
a simple function. Then its Lebesuge integral over $X$ is defined as
\[
\int_Xs d\mu = \sum_{k=1}^na_k\mu(E_k),
\]
where $E_k \in \Sigma_X$ and $\cup_k E_k = X$.
\end{defn}

\begin{rem}
Note the way the integral is written. The variable $x$ over which the integration
is carried out is not mentioned. Instead the measure $\mu$ is emphasised.
\end{rem}

\begin{rem}
A simple function is expressed as a finite sum. Therefore, the integral too is
expressed as a finite sum.
\end{rem}

\begin{prop}\label{s3p1}
Let $A_1, \ldots, A_n$ and $B_1, \ldots, B_m$ be partitions of $X$. Then the sets
$\{C_{ij} = A_i \cap B_j \;|\; i = 1, \ldots, n; j = 1, \ldots m\}$ also partition
$X$.
\end{prop}
\begin{proof}
Any $x \in X$ belongs to exactly one $A_i$ and exactly one $B_j$ and therefore 
exactly one $C_{ij}$. Therefore,
\[
X \subseteq \bigcup_{i, j} C_{ij}.
\]
Conversely, if $x \in \cup_{ij}C_{ij}$ then $x$ is a member of at least one $C_{ij}$
and hence at least one $A_i$. Therefore,
\[
\bigcup_{i, j} C_{ij} \subseteq X.
\]
Therefore,
\[
\bigcup_{i, j} C_{ij} = X.
\]
That an $x \in X$ belongs to exactly one $C_{ij}$ follows from the definition of
$C_{ij}$ as an intersection of elements of two partitions of $X$.
\end{proof}

\begin{prop}\label{s3p2}
Let $A_1, \ldots, A_n$ and $B_1, \ldots, B_m$ be partitions of $X$ and
$\{C_{ij} = A_i \cap B_j \;|\; i = 1, \ldots, n; j = 1, \ldots m\}$. Then
\[
s = \sum_{i=1}^n\sum_{j=1}^m a_i \chi_{C_{ij}} = 
\sum_{i=1}^n\sum_{j=1}^m b_j \chi_{C_{ij}}.
\]
\end{prop}
\begin{proof}
Since $A_i = \cup_j C_{ij}$,
\[
s = \sum_{i=1}^na_i\chi_{A_i} = \sum_{i=1}^n\sum_{j=1}^m a_i\chi_{C_{ij}}.
\]
Similarly,
\[
B_j = \cup_i C_{ij} \Rightarrow s = \sum_{i=1}^n\sum_{j=1}^m b_j\chi_{C_{ij}}.
\]
\end{proof}

\begin{prop}\label{s3p3}
Let $X$ be partitioned as $X = \cup_k A_k$ and $X = \cup_k B_k$. If
\[
s(x) = \sum_{k=1}^na_k\chi_{A_k} = \sum_{k=1}^mb_k\chi_{B_k}
\]
then
\[
\int_Xs d\mu = \sum_{k=1}^na_k\mu(A_k) = \sum_{k=1}^mb_k\mu(B_k).
\]
That is, the Lebesuge integral is independent of the way $X$ is partitioned.
\end{prop}
\begin{proof}
Let $C_{ij} = A_i \cap B_j$. We showed in proposition \ref{s3p1} that $\{C_{ij}\}$
partition $X$. Further,
\[
A_i = \cup_{j=1}^m C_{ij} \Rightarrow \mu(A_i) = \sum_{j=1}^m C_{ij}.
\]
Similarly,
\[
B_j = \cup_{i=1}^n C_{ij} \Rightarrow \mu(B_j) = \sum_{i=1}^n C_{ij}.
\]
Therefore,
\[
\int s d\mu = \sum_{i=1}^na_i\mu(A_i) = \sum_{i=1}^n a_i\sum_{j=1}^m C_{ij}.
\]
Using proposition \ref{s3p2}, the last term on the right hand side can be written
as
\[
\int s d\mu = \sum_{i=1}^na_i\mu(A_i) = \sum_{i=1}^n\sum_{j=1}^m b_j\chi_{C_{ij}}
= \sum_{j=1}^m b_j\chi_{B_j}.
\]
\end{proof}

\begin{prop}\label{s3p4}
Let $s$ and $ t$ be simple functions over a measure space $(X, \Sigma_X, \mu)$
such that $s \le  t$ then
\[
\int_Xs d\mu \le \int_X t d\mu.
\]
\end{prop}
\begin{proof}
If the two functions are not defined on the same partition we can redefine them
on the intersection of the two partitions. That is, let,
\[
s = \sum_{k=1}^n a_k\chi_{E_k} \text{ and }  t = \sum_{k=1}^n b_k\chi_{E_k}.
\]
Then $s \le  t \Rightarrow a_k \le b_k$ and hence, using the definition
\ref{s3d2} of the Lebesgue integral we conclude that
\[
\int_Xs d\mu \le \int_X t d\mu.
\]
\end{proof}

\begin{prop}\label{s3p5}
If $s_1, s_2$ are simple functions of a measure space $(X, \Sigma_X, \mu)$
and $c_1, c_2 \in \sor$ then
\[
\int_X cs_1 d\mu = c\int_Xs_1 d\mu
\]
and
\[
\int_X(s_1 + s_2)d\mu = \int_Xs_1 d\mu + \int_Xs_2 d\mu.
\]
\end{prop}
\begin{proof}
Let the collection of subsets $\{E_k\}$ of $X$ partition $X$ and let them be the
common partition over which $s_1$ and $s_2$ are defined. Let
\begin{eqnarray*}
s_1 &=& \sum_{k=1}^na_k\chi_{E_k} \\
s_1 &=& \sum_{k=1}^nb_k\chi_{E_k} 
\end{eqnarray*}
so that
\begin{eqnarray*}
cs_1 &=& \sum_{k=1}^n ca_k\chi_{E_k} \\
s_1 + s_2 &=& \sum_{k=1}^n(a_k + b_k)\chi_{E_k}
\end{eqnarray*}
so that
\[
\int_X cs_1 d\mu = \sum_{k=1}^n ca_k\mu(E_k) = c\sum_{k=1}^na_k\mu(E_k)
= c\int_Xs_1 d\mu.
\]
and
\[
\int_X(s_1 + s_2)d\mu = \sum_{k=1}^n(a_k + b_k)\mu(E_k) = 
\int_Xs_1 d\mu + \int_Xs_1 d\mu.
\]
\end{proof}

\begin{defn}
Let $(X, \Sigma_X, \mu)$ be a measure space and $f:X \rightarrow [0, \infty]$ be
a measurable function. Then
\[
\int_X f d\mu = 
\sup\left\{\int_X sd\mu \;|\; 0 \le s \le f \text{ and } s \text{ is simple.}\right\}.
\]
\end{defn}

We will now show that for any $f:X \rightarrow \sor$ where $(X, \Sigma_X, \mu)$
is a measure space, there exists a sequence of simple functions which approximate
$f$ as closely as we wish. For $n = 0, 1, 2, \ldots$ and $0 \le k \le 2^{2n} - 1$,
let
\begin{eqnarray*}
E_n^k &=& f^{-1}\left(\left(\frac{k}{2^n}, \frac{k+1}{2^n}\right]\right) \\
F_n &=& f^{-1}((2^n, \infty]).
\end{eqnarray*}
$F_n$ is the subset of $X$ which is mapped to $(2^n, \infty]$ while $E_n^k$ is
the subset of $X$ which is mapped to the interval 
\[
\left(\frac{k}{2^n}, \frac{k+1}{2^n}\right].
\]
We define $s_n$ as 
\begin{equation}\label{s3e1}
s_n = \sum_{k=0}^{2^{2n}-1}\frac{k}{2^n}\chi_{E_n^k} + 2^n\chi_{F_n}.
\end{equation}
The first few members of this sequence are
\begin{equation}\label{s3e2}
s_0 = \chi_{F_0},
\end{equation}
where $F_1 = f^{-1}((1, \infty])$,
\begin{equation}\label{c3e3}
s_1 = \frac{1}{2}\chi_{E_1^1} + \chi_{E_1^2} + \frac{3}{2}\chi_{E_1^3} + 2\chi_{F_1},
\end{equation}
where $F_2 = f^{-1}((2, \infty])$ and
\begin{eqnarray*}
E_1^1 &=& f^{-1}\left(\left(\frac{1}{2}, 1\right]\right) \\
E_1^2 &=& f^{-1}\left(\left(1, \frac{3}{2}\right]\right) \\
E_1^3 &=& f^{-1}\left(\left(\frac{3}{2}, 2\right]\right)
\end{eqnarray*}
Likewise,
\begin{equation}\label{s3e3}
s_2 = \sum_{k=0}^{15}\frac{k}{4}\chi_{E_2^k} + 4\chi_{F_2},
\end{equation}
where
\begin{eqnarray*}
F_2 &=& 4f^{-1}((4, \infty]) \\
E_2^k &=& f^{-1}\left(\frac{k}{4}, \frac{k+1}{4}\right)
\end{eqnarray*}
In a set like $s_2$, the $15$ terms of the sum are the $15$ rectangles which
approximate the area under $f$. Each rectangle has `width' $\mu(E_2^k)$ and
`height' $k/4$ while the last term has `width' $\mu(F_2)$ and `height' $4$.
We prove two properties of the sequence $\{s_n\}$ of simple functions.
\begin{prop}\label{s3p6}
$\{s_n\}$ is an monotone increasing and non-negative.
\end{prop}
\begin{proof}
Consider
\begin{eqnarray*}
s_n &=& \sum_{k=0}^{2^{2n}-1}\frac{k}{2^n}\chi_{E_n^k} + 2^n\chi_{F_n} \\
s_{n+1} &=& \sum_{k=0}^{2^{2n+2}-1}\frac{k}{2^{n+1}}\chi_{E_{n+1}^k} + 2^{n+1}\chi_{F_{n+1}}
\end{eqnarray*}
If $x \in X$ such that $f(x) > 2^{n+1}$, then $x \in F_{n+1} \subset F_n$ and 
$s_{n+1}(x) - s_n(x) = 2^{n+1} - 2^n > 0$.
If $x$ is such that $2^n < x < 2^{n+1}$ then $x \in F_n$ but $x \notin F_{n+1}$.
The smallest such $x$ will lie in
\[
f^{-1}\left(\left(\frac{2^{2n+1}}{2^{n+1}}, \frac{2^{2n+1} + 1}{2^{n+1}}\right]\right)
\]
which corresponds to $k = 2^{2n+1}$. Therefore,
\[
s_{n+1}(x) - s_n(x) = \frac{2^{2n+1}}{2^{n+1}} = 2^n + \frac{1}{2^{n+1}}
\]
and hence
\[
s_{n+1}(x) - s_n(x) = \frac{1}{2^{n+1}} > 0.
\]
We can follow the same steps for the entire range of $x$. Thus, $\{s_n\}$ is a
point-wise monotone increasing sequence of simple functions.

That $s_n$ is non-negative follows from the fact that the coefficients of terms
in the defining equation are positive.
\end{proof}

\begin{prop}\label{s3p7}
$s_n \rightarrow f$.
\end{prop}
\begin{proof}
Let $f(x) = (k + \delta)/2^n$ where $k$ is a positive integer and $0 < \delta < 1$
is a real. Then 
\[
x \in f^{-1}\left(\left(\frac{k}{2^n}, \frac{k+1}{2^n}\right]\right)
\]
so that
\[
s_n(x) = \frac{k}{2^n}
\]
and hence
\[
f(x) - s_n(x) = \frac{\delta}{2^n}.
\]
\end{proof}

\begin{defn}\label{s3d4}
Let $f:X \rightarrow \sor$ and $(X, \Sigma_X, \mu)$ be a measure space. If $f^{\pm}$
are defined as in the proof of proposition \ref{s2p7} then
\[
\int_X f d\mu = \int_X f^+ d\mu - \int_X f^-d\mu
\]
\end{defn}
\end{document}