\documentclass{article}
\usepackage{amsmath, amsthm, amssymb, amsfonts, graphicx, color}
\usepackage{mathtools}
\usepackage{hyperref}
\usepackage{mathabx}

\newcommand{\td}[2]{\frac{d{#1}}{d{#2}}}
\newcommand{\sor}{\mathbb{R}}
\newcommand{\son}{\mathbb{N}}
\newcommand{\op}{\prime}

\theoremstyle{plain}
\newtheorem{thm}{Theorem}
\numberwithin{thm}{section}

\theoremstyle{plain}
\newtheorem{prop}{Proposition}
\numberwithin{prop}{section}

\theoremstyle{definition}
\newtheorem{defn}{Definition}
\numberwithin{defn}{section}

\theoremstyle{remark}
\newtheorem*{rem}{Remark}

\theoremstyle{plain}
\newtheorem{cor}{Corollary}
\numberwithin{cor}{section}

\numberwithin{equation}{section}
\title{Measure Theory}
\author{Amey Joshi}
\date{26-Sep-2024}
\begin{document}
\maketitle
\section{$\sigma$-algebra}\label{s1}
\begin{defn}\label{s1d1}
Let $X$ be a non-empty set. A $\sigma$-algebra, $\Sigma$, on $X$ is a family
of subsets of $X$ such that:
\begin{enumerate}
\item $\Sigma$ is non-empty,
\item If $E \in \Sigma$ then $E^c \in \Sigma$ and
\item If $E_1, E_2, \ldots \in \Sigma$ then $\cup_{n \in \mathbb{N}}E_n \in \Sigma$. 
\end{enumerate}
\end{defn}
\begin{prop}\label{s1p1}
If $\Sigma$ is a $\sigma$-algebra on $X$ then $X, \varnothing \in \Sigma$.
\end{prop}
\begin{proof}
Since $\Sigma$ is non-empty, it has at least one member, say $A \subset X$. 
Therefore, $A^c \in \Sigma$ and hence $A \cup A^c = X \in \Sigma$. 
Therefore, $X^c = \varnothing \in \Sigma$.
\end{proof}

\begin{prop}\label{s1p2}
A $\sigma$-algebra $\Sigma$ on $X$ is closed under countable intersections.
\end{prop}
\begin{proof}
Let $E_1, E_2, \ldots \in \Sigma$. Then,
\[
\bigcap_{n \in \mathbb{N}}E_n = \left(\bigcup E_n^c\right)^c.
\]
Since $E_n \in \Sigma$, $E_n^c$ are also in $\Sigma$, so is their
countable union and its complement.
\end{proof}

\begin{defn}\label{s1d2}
If $\Sigma$ is a $\sigma$-algebra on $X$ then the pair $(X, \Sigma)$
is called a measurable space and the members of $\Sigma$ are called measurable
sets.
\end{defn}

A topology is also a family of subsets of a set. It is defined as
\begin{defn}\label{s1d3}
Let $X$ be a non-empty set. A collection $\tau$ of subsets of $X$ is a topology
if:
\begin{enumerate}
\item $\varnothing, X \in \tau$,
\item An arbitrary union of members of $\tau$ is a member of $\tau$.
\item An intersection of a finite number of members of $\tau$ is a member of $\tau$.
\end{enumerate}
The pair $(X, \tau)$ is called a topological space and members of $\tau$ are
called open sets.
\end{defn}
The differences between the two families are:
\begin{enumerate}
\item A $\sigma$-algebra is closed under complements, a topology is not.
\item A $\sigma$-algebra is closed under countable unions, a topology is closed
under arbitrary unions.
\item A $\sigma$-algebra is closed under countable intersections while a topology
is closed under finite intersections.
\end{enumerate}

\subsection{Examples and non-examples of $\sigma$-algebras}
\begin{enumerate}
\item For any non-empty set $X$, $2^X$ and $\{\varnothing, X\}$ are $\sigma$-
algebras. They are called trivial $\sigma$-algebras.
\item If $X = \{1, 2, 3\}$ then $\{\varnothing, \{1\}, \{2, 3\}, \{1, 2, 3\}\}$ is
a $\sigma$-algebra. It is said to be generated by $\{1\}$ because it is the 
smallest $\sigma$-algebra containing $\{1\}$. 

Note that there are $2^3 = 8$ subsets of $X$. Therefore, there are $2^8 = 256$
subsets of $2^X$.
\item If $\bar{\sor} = [-\infty, \infty]$ then $\{(a, b)\;|\; a, b\in\bar{\sor}\}$
is not a $\sigma$-algebra. This is because the complement of $(a, b)$ is not an open
interval. For the same reason, the set of all closed intervals is also not a
$\sigma$-algebra. (The set of all open intervals is not even closed under unions.)
\end{enumerate}

\begin{prop}\label{s1p3}
Let $\Sigma_1$ and $\Sigma_2$ be $\sigma$-algebras on $X$. Then their
intersection is also a $\sigma$-algebra on $X$.
\end{prop}
\begin{proof}
Let $\Sigma = \Sigma_1 \cap \Sigma_2$. Since both $\Sigma_1$ and 
$\Sigma_2$ contain $X$ and $\sigma$. $\Sigma$ is non-empty. If $A \in
\Sigma$ then $A \in \Sigma_1$ and $A \in \Sigma_2$, so that $A^c 
\in \Sigma_1$ and $A^c \in \Sigma_2$, that is $A^c \in \Sigma$. 
Similarly, if $E_1, E_2, \ldots \in \Sigma$ then these sets are also in 
$\Sigma_1$ and $\Sigma_2$ so that their countable union is in both
$\sigma$-algebras and therefore also in their intersection.
\end{proof}

\begin{defn}\label{s1d4}
Let $A \subset 2^X$. Then an intersection of all $\sigma$-algebras containing $A$
is called the $\sigma$-algebra generated by $A$. It is also the smallest $\sigma$-
algebra containing $A$. It is denoted by $\langle A \rangle$.
\end{defn}

\begin{defn}\label{s1d5}
Let $(X, \tau)$ be a topological space. Then $\langle\tau\rangle$ is called the
Borel $\sigma$-algebra. It is denoted by $\mathcal{B}(X)$.
\end{defn}

$\mathcal{B}(X)$ contains all open sets, closed sets and their countable unions
and intersections.

\begin{defn}\label{s1d6}
Let $(X, \Sigma)$ be a measurable space. A measure on it is a mapping
$\mu: \Sigma \rightarrow [0, \infty]$ such that
\begin{enumerate}
\item $\mu(\varnothing) = 0$,
\item If $E_1, E_2, \ldots \in \Sigma$ are mutually disjoint then
\[
\mu\left(\bigcup_{n \in \mathbb{N}}E_n\right) = \sum_{n \in \mathbb{N}}\mu(E_n).
\]
The triple $(X, \Sigma, \mu)$ is called a measure space.
\end{enumerate}
\end{defn}

Examples of measure:
\begin{itemize}
\item Let $X$ be an arbitrary set with a $\sigma$-algebra $\Sigma$. Then,
\[
\mu(A) = \begin{cases} |A| & \text{ if } $A$ \text{ is a finite set} \\
\infty & \text{ otherwise.}
\end{cases}
\]
is called a counting measure.

\item One the measure space $(\sor, \mathcal{B}(\sor))$ define a 
measure $\mu$ such that
\begin{eqnarray*}
\mu([a, b]) &=& b - a \\
\mu((a, b)) &=& b - a \\
\mu((a, b]) &=& b - a \\
\mu([a, b)) &=& b - a.
\end{eqnarray*}
It is called the Lebesgue measure. Note that $(a, b] = [a, b] \cap (a, \infty)$
and $[a, b) = [a, b] \cap (-\infty, b)$ so that semi-open intervals are members
of the Borel $\sigma$-algebra $\mathcal{B}(\son)$.

\item One the measure space $(\sor, \mathcal{B}(\sor))$ define a 
measure $P$ such that
\[
P(B) = \frac{1}{\sqrt{2\pi}}\int_B e^{-x^2/2}dx,
\]
is called the probability measure.
\end{itemize}

\begin{prop}\label{s1p4}Let $(X, \Sigma, \mu)$ be a measure space. Then,
\begin{enumerate}
\item $\mu$ is finitely additive.
\item $\mu$ is monotonic.
\item If $A \subseteq B$ has a finite measure then $\mu(B - A) = \mu(B) - \mu(A)$.
\item If $A$ or $B$ has a finite measure then so does $A \cap B$ and
\item If $A$ or $B$ has a finite measure then $\mu(A \cup B) = \mu(A) + \mu(B) -
\mu(A \cap B)$.
\end{enumerate}
\end{prop}
\begin{proof}
Let $A_1, \ldots A_n \in \Sigma$ be mutually disjoint. Then, 
\[
\mu\left(\bigcup_{i=1}^n A_i\right) = 
\mu\left( A_1 \cup \left(\bigcup_{i=2}^n A_i\right)\right) = 
\mu(A_1) + \mu\left(\bigcup_{i=2}^n A_i\right)
\]
Carrying out this step $n - 2$ times more, we get
\[
\mu\left(\bigcup_{i=1}^n A_i\right) = \sum_{i=1}^n \mu(A_i).
\]
This is called the finite additivity of $\mu$.

Let $A, B \in \Sigma$ be such that $A \subseteq B$. Then $B = A \cup (B - A)$
and the sets $A$ and $B - A$ are disjoint. Therefore, $\mu(B) = \mu(A) + 
\mu(B - A) \ge \mu(A)$.
This is called the monotonicity of $\mu$. Further, when $A \subset B$, and 
$\mu(A)$ is finite, we can subtract it from both sides of the equation to get
$\mu(B - A) = \mu(B) - \mu(A)$.

Without loss of generality, let $A$ have finite measure. Then $A = (A \cap B^c)
\cup (A \cap B)$ where the union is disjoint. Therefore, $\mu(A) = \mu(A \cap B^c)
+ \mu(A \cap B)$. Since measure is a non-negative quantity and lhs is finite, it
immediately follows that $A \cap B$ (and $A \cap B^c$) has finite measure.

Note the following set identities,
\begin{eqnarray*}
A &=& (A \cap B^c) \cup (A \cap B) \\
B &=& (A^c \cap B) \cup (A \cap B) \\
A \cup B &=& (A \cap B^c) \cup (A \cap B) \cup (A^c \cap B),
\end{eqnarray*}
where all the unions are among disjoint sets. Therefore,
\begin{eqnarray*}
\mu(A) &=& \mu(A \cap B^c) \cup \mu(A \cap B) \\
\mu(B) &=& \mu(A^c \cap B) \cup \mu(A \cap B) \\
\mu(A \cup B) &=& \mu(A \cap B^c) \cup \mu(A \cap B) \cup \mu(A^c \cap B),
\end{eqnarray*}
If one of $A$ of $B$ has a finite measure then $A \cap B$ will have a finite
measure permitting us to subtract $\mu(A \cap B)$ from the equation obtained
by summing the first two equations to get
\[
\mu(A \cup B) = \mu(A) + \mu(B) - \mu(A \cap B).
\]
\end{proof}

\begin{prop}\label{s1p5}Let $(X, \Sigma, \mu)$ be a measure space and let
$E_1 \subseteq E_2 \subseteq \ldots$ be such that
\[
\bigcup_{n \ge 1}E_n = E.
\]
Then,
\[
\mu(E) = \lim_{n \rightarrow \infty}\mu(E_n).
\]
\end{prop}
\begin{proof}
If $E_0 = \varnothing$ then for a finite $n$, $E_n = (E_n - E_{n-1}) \cup 
(E_{n-1} - E_{n-2}) \cup \cdots (E_2 - E_1) \cap (E_1 - E_0)$ while for $E$ 
itself,
\[
E = \bigcup_{n >= 0} (E_{n} - E_{n-1}).
\]
The sets $E_{n} - E_{n-1}$ are disjoint for every $n$ so that
\begin{eqnarray*}
\mu(E) &=& \sum_{n \ge 1} \mu(E_n - E_{n-1}) \\
  &=& \lim_{n \rightarrow \infty}\sum_{k=1}^n \mu(E_k - E_{k-1}) \\
  &=& \lim_{n \rightarrow \infty}\mu\left(\bigcup_{k=1}^n (E_k - E_{k-1})\right) \\
  &=& \lim_{n \rightarrow \infty}\mu(E_n)
\end{eqnarray*}
\end{proof}

\begin{prop}\label{s1p6}Let $(X, \Sigma, \mu)$ be a measure space and
$E_1, E_2, \ldots \in \Sigma$. Then
\[
\mu\left(\bigcup_{n \ge 1}E_n\right) \le \sum_{n \ge 1}\mu(E_n).
\]
\end{prop}
\begin{proof}
We will prove by induction on the number of sets $E_n$. If there are two sets
then, using item 5 of proposition \ref{s1p4},
\[
\mu(E_1 \cup E_2) = \mu(E_1) + \mu(E_2) - \mu(E_1 \cap E_2) \le \sum_{k=1}^2\mu(E_k).
\]
Let the induction hypothesis be true for $p$ sets. Consider
\[
\mu\left(\bigcup_{k \ge 1}^{p+1}E_k\right) = 
\mu\left(\bigcup_{k \ge 1}^{p}E_k \cup E_{p+1}\right) \le 
\mu\left(\bigcup_{k \ge 1}^{p}E_k\right) + \mu(E_{p+1})
\]
by induction hypothesis. Use the induction hypothesis once again for the first
term on rhs to get
\[
\mu\left(\bigcup_{k \ge 1}^{p+1}E_k\right) \le \sum_{k=1}^{p+1}\mu(E_k).
\]
Therefore, the hypothesis is true for all $p \in \mathbb{N}$.
\end{proof}

\begin{prop}\label{s1p7}Let $(X, \Sigma, \mu)$ be a measure space and let
$E_1 \supseteq E_2 \supseteq \ldots$ be such that 
\[
\bigcap_{n \ge 1}E_n = E
\]
and $\mu(E_1) < \infty$ then
\[
\lim_{n \rightarrow \infty}\mu(E_n) = \mu(E).
\]
\end{prop}
\begin{proof}
In this proof $E_k^c = E_1 - E_k$ for all $k \ge 1$, that is, complementation is
with respect to $E_1$. Since $E_1 \supseteq E_2 \supseteq \ldots$ and $\cap E_k 
= E$, we also have $E_1^c \subseteq E_2^c \subseteq \ldots$ and $\cup E_k^c = E^c$.
Therefore, by proposition \ref{s1p5},
\[
\mu(E^c) = \lim_{n \rightarrow \infty}\mu(E_n^c).
\]
Now, $\mu(E) + \mu(E^c) = \mu(E_1)$ and $\mu(E_n) + \mu(E_n^c) = \mu(E_1)$ so that
\[
\mu(E_1) - \mu(E) = \lim_{n \rightarrow \infty}(\mu(E_1) - \mu(E_n)).
\]
Since $\mu(E_1) < \infty$, the proposition follows immediately.
\end{proof}

\section{Measurable maps}\label{s2}
\begin{defn}\label{s2d1}
Let $(X, \Sigma_X)$ and $(Y, \Sigma_Y)$ be measurable spaces. A map $f: X
\rightarrow Y$ is said to be measurable if for all $B \in \Sigma_Y$, the set
$f^{-1}(B)$ is a member of $\Sigma_X$.
\end{defn}

A trivial example of a measurable map is $f(x) = c$ for all $x \in X$ where $c$
is a constant. For all $B$ which contain $c$, $f^{-1}(B) = X$ while for those 
which do not containt $c$, $f^{-1}(B) = \varnothing$.

\begin{prop}\label{s2p1}
A composition of two measurable maps is measurable.
\end{prop}
\begin{proof}
Let $(X, \Sigma_X), (Y, \Sigma_Y)$ and $(Z, \Sigma_Z)$ be measurable spaces and
$f:X \rightarrow Y, g: Y \rightarrow Z$ be measurable maps. Let $h = g \circ f$
and $C$ be an arbitrary member of $\Sigma_Z$. Then $h^{-1}(C) = f^{-1}(g^{-1}(C))$.
Since $g$ is measurable, $B = g^{-1}(C)$ is a member of $\Sigma_Y$. Since $f$ is
measurable, $f^{-1}(B)$ is a member of $\Sigma_X$.
\end{proof}

\begin{prop}\label{s2p2}
Let $(X, \Sigma_X)$ and $(Y, \Sigma_Y)$ be measurable spaces and let 
$\mathcal{H}$ generate $\Sigma_Y$. A map $f: X \rightarrow Y$ is measurable iff 
for all $V \in \mathcal{H}$, $f^{-1}(V) \in \Sigma_X$.
\end{prop}
\begin{proof}
If $V \in \mathcal{H}$ then $V \in \Sigma_Y$. Since $f$ is measurable, 
$f^{-1}(V) \in \Sigma_X$.

Let $\mathcal{G} = \{f^{-1}(V) \;\forall\; V \in \mathcal{H}\}$ and let 
$\Sigma_Y^\prime = \{V \in \Sigma_Y \;|\; f^{-1}(V) \in \mathcal{G}\}$. By
hypothesis, $\mathcal{G} \subseteq \Sigma_X$. We will show that:
\begin{enumerate}
\item $\Sigma_Y^\prime$ is a $\sigma$-algebra: Since $\Sigma_Y$ is a $\sigma$-
algebra, it has at least one member so that $\Sigma_Y^\prime$ is non-empty.
Let $V \in \Sigma_Y^\prime$. Then $V^c$ is a member of every $\sigma$-algebra
containing $\mathcal{H}$. In particular, $V^c \in \Sigma_Y^\prime$. If $E_1, E_2,
\ldots \in \mathcal{H}$ then their countable union is in every $\sigma$-algebra
containing $\mathcal{H}$ and in particular in $\Sigma_Y^\prime$. Thus, 
$\Sigma_Y^\prime$ is also a $\sigma$-algebra containing $\mathcal{H}$. 

\item Since $f^{-1}(V) \in \mathcal{G}$ for all $V \in \Sigma_Y^\prime$, 
$\mathcal{H}$ is a member of $\Sigma_Y^\prime$.
\end{enumerate}

Thus $\Sigma_Y^\prime$ is a $\sigma$-algebra containing $\mathcal{H}$. Therefore,
$\Sigma_Y^\prime \supseteq \Sigma_Y$ such that the pre-image of every member of
$\Sigma_Y^\prime$ is in $\Sigma_X$. Therefore, the pre-image of every member of 
$\Sigma_Y$ also lies in $\Sigma_X$, making $f$ a measurable map.
\end{proof}

\begin{defn}\label{s2d2}
Let $(X, \tau_X)$ and $(Y, \tau_Y)$ be topological spaces and $f: X \rightarrow Y$
be such that $f^{-1}(V) \in \tau_X$ for all $V \in \tau_Y$. Then $f$ is called a
continuous map.
\end{defn}

\begin{cor}\label{s2c1}
If $(X, \tau_X)$ and $(Y, \tau_Y)$ are topological spaces and $f: X \rightarrow Y$
is continuous then $f$ is measurable on $(X, \langle\tau_X\rangle)$ and $(Y, \langle
\tau_Y\rangle)$.
\end{cor}
\begin{proof}
Follows immediately from proposition \ref{s2p2} after identifying $\mathcal{H}$
with $\tau_Y$.
\end{proof}

\begin{cor}\label{s2c2}
Let $(X, \Sigma_X)$ be a measurable space. A function $f: X \rightarrow \sor$
is measurable iff $f^{-1}((a, \infty]) \in \Sigma_X$ for all $a \in \sor$.
\end{cor}
\begin{proof}
The $\sigma$-algebra on $\sor$ is $\mathcal{B}$. The corollary follows immediately
from proposition \ref{s2p2} if we can show that the set of all open intervals
can be generated from the set of all semi-open intervals by set operations used
to define a $\sigma$-algebra. If $a < b$, then $(a, b) = (a, \infty] \cap (b,
\infty]$.
\end{proof}

\begin{cor}\label{s2c3}
Let $(X, \Sigma_X)$ be a measurable space. A function $f: X \rightarrow \sor$
is measurable iff $f^{-1}([-\infty, a) \in \Sigma_X$ for all $a \in \sor$.
\end{cor}
\begin{proof}
If $a < b$, $(a, b) = [-\infty, a)^c \cap [-\infty, b)^c$. Therefore, all open
intervals can be generated from semi-open intervals by the operations used to
define a $\sigma$-algebra.
\end{proof}

\begin{prop}\label{s2p3}
Let $f: X \rightarrow \sor$ be a measuable function. Then so is $cf$, where $c$
is a non-zero real number.
\end{prop}
\begin{proof}
If $g = cf$ then $g^{-1}(A) = \{x/c \;|\; x \in f^{-1}(A)\}$ for any semi-open 
interval $A$ in $\mathbb{R}$. The proposition follows from \ref{s2c2}.\
\end{proof}

\begin{rem}
I don't think it is easy to show that if $A$ is an arbitrary measurable subset 
of $\sor$ then so is $\{x/c \;|\; x \in f^{-1}(A)\}$. I can easily show it only 
for an interval of any kind.
\end{rem}

\begin{prop}\label{s2p4}
Let $\{f_n\}$ be a sequence of measurable real valued functions. Then the functions
$\sup f_n, \inf f_n, \min f_n, \max f_n, \limsup f_n, \liminf f_n$ are also
measurable.
\end{prop}
\begin{proof}
Let $f_n: X \rightarrow \sor$ be a real-valued measurable functions for $n \in
\son$. If $\Sigma_X$ is a $\sigma$-algebra on $X$ then for all $(a, \infty]$,
$f_n^{-1}((a, \infty]) \in \Sigma_X$.
\begin{itemize}
\item Let $f = \sup f_n$. Then 
\[
f^{-1}((c, \infty]) = \bigcup_{n \ge 1}f_n^{-1}((c, \infty]).
\]
Since $f_n$ are measurable, $f_n^{-1}((c, \infty]) \in \Sigma_X$ for all $n$
and so is their countable union. Therefore, by corollary \ref{s2c2}, $f$ is 
measurable.

\item Let $f = \inf f_n$. Then 
\[
f^{-1}([-\infty, c)) = \bigcup_{n \ge 1}f_n^{-1}([-\infty, c)).
\]
Since $f_n$ are measurable, $f_n^{-1}([\infty, c)) \in \Sigma_X$ for all $n$
by corollary \ref{s2c3} and so is their countable union. Therefore, by corollary 
\ref{s2c3}, $f$ is measurable.

\item Let $f = \max f_n$, then $f$ is also the supremum.

\item Let $f = \inf f_n$ then $f$ is also the infimum.

\item Let $f = \limsup f_n$ then $f = \inf\{\sup\{f_m : m \ge n\} n \ge 1\}$.
Since $\sup\{f_m : m \ge n\}$ is measurable for all $n$, and the infimum is
also measurable, $f$ is measurable.

\item Let $f = \liminf f_n$ then $f = \sup\{\inf\{f_m : m \ge n\} n \ge 1\}$.
For the same reasons as mentioned in the previous case, $f$ is measurable.

\end{itemize}
\end{proof}

For sake of reference, we prove
\begin{prop}\label{s2p5}
Let $A \subseteq \sor$. If $a \in A$ is the maximum element of $A$ then it is also
the supremum of $A$.
\end{prop}
\begin{proof}
Let $b$ be a supremum of $A$ then $a \le b$. Since $a$ is a maximum, $a \ge b$.
Therefore, $a = b$.
\end{proof}

\begin{prop}\label{s2p6}
Let $f, g: \sor \rightarrow \sor$ be measurable functions. Then so are $f + g,
f - g, fg$ and $f/g$.
\end{prop}
\begin{proof}
We will prove each case separately.
\begin{itemize}
\item Let $s = f + g$ be the sum of two measurable functions. Then $s(x) > c$ 
iff $f(x) > r$ and $g(x) > c - r$ for some rational number $r$. The set
\[
s^{-1}((c, \infty]) = \bigcup_r f^{-1}((r, \infty]) \cap g^{-1}((c - r, \infty])
\]
Note that the set of rational numbers is countable. Since $f^{-1}((r, \infty])$
and $g^{-1}((c - r, \infty])$ are members of $\Sigma_\sor$, so is their 
intersection and the countable union of their intersection. Therefore, by 
corollary \ref{s2c2}, $s$ is measuable.

\item By proposition \ref{s2p3}, $-g$ is measurable. Using the previous point,
$f + (-g) = f - g$ is measuable.

\item Given a function $f: \sor \rightarrow \sor$, define,
\begin{eqnarray*}
f^+(x) &=& \max\{+f(x), 0\} \\
f^-(x) &=& \max\{-f(x), 0\}
\end{eqnarray*}
as the positive and negative parts of a function. In terms of these, $f = f^+
- f^-$ and $fg = f^+g^+ - f^+g^- - f^-g^+ + f^-g^-$. Each of these terms is a
product of positive valued function. Therefore, to prove the measurability of
$fg$, we can as well restrict ourselves to non-negative valued functions and use
the previous parts of this proposition.

Let $p = fg$ be the product of non-negative valued functions$f, g$. Now , $p(x)
> c$ iff $f(x) > r$ and $g(x) > c/r$ for every positive $r$. Furthermore,
\[
p^{-1}((c, \infty]) = \bigcup_r f^{-1}((r, \infty]) \cap g^{-1}((c/r, \infty])
\]

\item Let $q = 1/g$ be the reciprocal of a positive valued function $g$. Then
$q(x) > c$ iff $g(x) < 1/c$ for any positive real $c$. Thus,
\[
q^{-1}((c, \infty]) = g^{-1}([-\infty, c^{-1})).
\]
Since the right hand side is a measurable set, so is the left hand side, making
$q$ a measurable function.

Measurability of $f/g$ follows from the fact that $f/g = fq$.
\end{itemize}
\end{proof}

\begin{thm}\label{s1t1}
A real-valued function $f$ is measurable iff $f^+$ and $f^-$ are measurable. 
Moreover, if $f$ is measuable then so is $|f| = f^+ + f^-$.
\end{thm}
\begin{proof}
The `if' part follows from the previous proposition \ref{s2p6}. Assume that
$f$ is measurable. Then,
\[
{f^+}^{-1}((c, \infty]) = \begin{cases}
f^{-1}((c, \infty]) \text{ for } c \ge 0. \\
\varnothing \text{ for } c < 0
\end{cases}
\]
Both these sets are measurable making $f^+$ a measurable function. Since $f^- =
f^+ - f$, by the previous proposition, $f^-$ is also measurable. From this, the
measuarability of $f^+ + f^- = |f|$ also follows.
\end{proof}

\begin{defn}\label{s2d3}
The characteristic function of a subset $A$ of a set $X$ is defined as
$\chi_A: X \rightarrow \{0, 1\}$ and
\[
\chi_A(x) = \begin{cases} 1 & \text{ if } x \in A \\
0 & \text{ if } x \notin A
\end{cases}
\]
\end{defn}

\begin{prop}\label{s2p7}
Let $A \subseteq X$. $\chi_A$ is a measurable function iff $A$ is a measurable
set.
\end{prop}
\begin{proof}
$\chi_A: X \rightarrow \{0, 1\}$ is measurable iff $\chi_A^{-1}(1)$ and 
$\chi_A^{-1}(0)$ are measurable. But these sets are precisely $A$ and $A^c$.
\end{proof}

\section{Lebesgue integral}\label{s3}
\begin{defn}\label{s3d1}
A real valued simple function is of the form
\[
s(x) = \sum_{k=1}^n a_k \chi_{E_k}(x).
\]
\end{defn}

\begin{defn}\label{s3d2}
Let $(X, \Sigma_X, \mu)$ be a measure space and $s: X \rightarrow \sor$ be
a simple function. Then its Lebesuge integral over $X$ is defined as
\[
\int_Xs d\mu = \sum_{k=1}^na_k\mu(E_k),
\]
where $E_k \in \Sigma_X$ partition $X$.
\end{defn}

\begin{rem}
Note the way the integral is written. The variable $x$ over which the integration
is carried out is not mentioned. Instead the measure $\mu$ is emphasised.
\end{rem}

\begin{rem}
A simple function is expressed as a finite sum. Therefore, the integral too is
expressed as a finite sum.
\end{rem}

\begin{prop}\label{s3p1}
Let $A_1, \ldots, A_n$ and $B_1, \ldots, B_m$ be partitions of $X$. Then the sets
$\{C_{ij} = A_i \cap B_j \;|\; i = 1, \ldots, n; j = 1, \ldots m\}$ also partition
$X$.
\end{prop}
\begin{proof}
Any $x \in X$ belongs to exactly one $A_i$ and exactly one $B_j$ and therefore 
exactly one $C_{ij}$. Therefore,
\[
X \subseteq \bigcup_{i, j} C_{ij}.
\]
Conversely, if $x \in \cup_{ij}C_{ij}$ then $x$ is a member of at least one $C_{ij}$
and hence at least one $A_i$. Therefore,
\[
\bigcup_{i, j} C_{ij} \subseteq X.
\]
Therefore,
\[
\bigcup_{i, j} C_{ij} = X.
\]
That an $x \in X$ belongs to exactly one $C_{ij}$ follows from the definition of
$C_{ij}$ as an intersection of elements of two partitions of $X$.
\end{proof}

\begin{prop}\label{s3p2}
Let $A_1, \ldots, A_n$ and $B_1, \ldots, B_m$ be partitions of $X$ and
$\{C_{ij} = A_i \cap B_j \;|\; i = 1, \ldots, n; j = 1, \ldots m\}$. Then
\[
s = \sum_{i=1}^n\sum_{j=1}^m a_i \chi_{C_{ij}} = 
\sum_{i=1}^n\sum_{j=1}^m b_j \chi_{C_{ij}}.
\]
\end{prop}
\begin{proof}
Since $A_i = \cup_j C_{ij}$,
\[
s = \sum_{i=1}^na_i\chi_{A_i} = \sum_{i=1}^n\sum_{j=1}^m a_i\chi_{C_{ij}}.
\]
Similarly,
\[
B_j = \cup_i C_{ij} \Rightarrow s = \sum_{i=1}^n\sum_{j=1}^m b_j\chi_{C_{ij}}.
\]
\end{proof}

\begin{prop}\label{s3p3}
Let $X$ be partitioned as $X = \cup_k A_k$ and $X = \cup_k B_k$. If
\[
s(x) = \sum_{k=1}^na_k\chi_{A_k} = \sum_{k=1}^mb_k\chi_{B_k}
\]
then
\[
\int_Xs d\mu = \sum_{k=1}^na_k\mu(A_k) = \sum_{k=1}^mb_k\mu(B_k).
\]
That is, the Lebesuge integral is independent of the way $X$ is partitioned.
\end{prop}
\begin{proof}
Let $C_{ij} = A_i \cap B_j$. We showed in proposition \ref{s3p1} that $\{C_{ij}\}$
partition $X$. Further,
\[
A_i = \cup_{j=1}^m C_{ij} \Rightarrow \mu(A_i) = \sum_{j=1}^m C_{ij}.
\]
Similarly,
\[
B_j = \cup_{i=1}^n C_{ij} \Rightarrow \mu(B_j) = \sum_{i=1}^n C_{ij}.
\]
Therefore,
\[
\int s d\mu = \sum_{i=1}^na_i\mu(A_i) = \sum_{i=1}^n a_i\sum_{j=1}^m C_{ij}.
\]
Using proposition \ref{s3p2}, the last term on the right hand side can be written
as
\[
\int s d\mu = \sum_{i=1}^na_i\mu(A_i) = \sum_{i=1}^n\sum_{j=1}^m b_j\chi_{C_{ij}}
= \sum_{j=1}^m b_j\chi_{B_j}.
\]
\end{proof}

\begin{prop}\label{s3p4}
Let $s$ and $ t$ be simple functions over a measure space $(X, \Sigma_X, \mu)$
such that $s \le  t$ then
\[
\int_Xs d\mu \le \int_X t d\mu.
\]
\end{prop}
\begin{proof}
If the two functions are not defined on the same partition we can redefine them
on the intersection of the two partitions. That is, let,
\[
s = \sum_{k=1}^n a_k\chi_{E_k} \text{ and }  t = \sum_{k=1}^n b_k\chi_{E_k}.
\]
Then $s \le  t \Rightarrow a_k \le b_k$ and hence, using the definition
\ref{s3d2} of the Lebesgue integral we conclude that
\[
\int_Xs d\mu \le \int_X t d\mu.
\]
\end{proof}

\begin{prop}\label{s3p5}
If $s_1, s_2$ are simple functions of a measure space $(X, \Sigma_X, \mu)$
and $c_1, c_2 \in \sor$ then
\[
\int_X cs_1 d\mu = c\int_Xs_1 d\mu
\]
and
\[
\int_X(s_1 + s_2)d\mu = \int_Xs_1 d\mu + \int_Xs_2 d\mu.
\]
\end{prop}
\begin{proof}
Let the collection of subsets $\{E_k\}$ of $X$ partition $X$ and let them be the
common partition over which $s_1$ and $s_2$ are defined. Let
\begin{eqnarray*}
s_1 &=& \sum_{k=1}^na_k\chi_{E_k} \\
s_1 &=& \sum_{k=1}^nb_k\chi_{E_k} 
\end{eqnarray*}
so that
\begin{eqnarray*}
cs_1 &=& \sum_{k=1}^n ca_k\chi_{E_k} \\
s_1 + s_2 &=& \sum_{k=1}^n(a_k + b_k)\chi_{E_k}
\end{eqnarray*}
so that
\[
\int_X cs_1 d\mu = \sum_{k=1}^n ca_k\mu(E_k) = c\sum_{k=1}^na_k\mu(E_k)
= c\int_Xs_1 d\mu.
\]
and
\[
\int_X(s_1 + s_2)d\mu = \sum_{k=1}^n(a_k + b_k)\mu(E_k) = 
\int_Xs_1 d\mu + \int_Xs_1 d\mu.
\]
\end{proof}

\begin{defn}
Let $(X, \Sigma_X, \mu)$ be a measure space and $f:X \rightarrow [0, \infty]$ be
a measurable function. Then
\[
\int_X f d\mu = 
\sup\left\{\int_X sd\mu \;|\; 0 \le s \le f \text{ and } s \text{ is simple.}\right\}.
\]
\end{defn}

We will now show that for any $f:X \rightarrow \sor$ where $(X, \Sigma_X, \mu)$
is a measure space, there exists a sequence of simple functions which approximate
$f$ as closely as we wish. For $n = 0, 1, 2, \ldots$ and $0 \le k \le 2^{2n} - 1$,
let
\begin{eqnarray*}
E_n^k &=& f^{-1}\left(\left(\frac{k}{2^n}, \frac{k+1}{2^n}\right]\right) \\
F_n &=& f^{-1}((2^n, \infty]).
\end{eqnarray*}
$F_n$ is the subset of $X$ which is mapped to $(2^n, \infty]$ while $E_n^k$ is
the subset of $X$ which is mapped to the interval 
\[
\left(\frac{k}{2^n}, \frac{k+1}{2^n}\right].
\]
We define $s_n$ as 
\begin{equation}\label{s3e1}
s_n = \sum_{k=0}^{2^{2n}-1}\frac{k}{2^n}\chi_{E_n^k} + 2^n\chi_{F_n}.
\end{equation}
The first few members of this sequence are
\begin{equation}\label{s3e2}
s_0 = \chi_{F_0},
\end{equation}
where $F_1 = f^{-1}((1, \infty])$,
\begin{equation}\label{c3e3}
s_1 = \frac{1}{2}\chi_{E_1^1} + \chi_{E_1^2} + \frac{3}{2}\chi_{E_1^3} + 2\chi_{F_1},
\end{equation}
where $F_2 = f^{-1}((2, \infty])$ and
\begin{eqnarray*}
E_1^1 &=& f^{-1}\left(\left(\frac{1}{2}, 1\right]\right) \\
E_1^2 &=& f^{-1}\left(\left(1, \frac{3}{2}\right]\right) \\
E_1^3 &=& f^{-1}\left(\left(\frac{3}{2}, 2\right]\right)
\end{eqnarray*}
Likewise,
\begin{equation}\label{s3e3}
s_2 = \sum_{k=0}^{15}\frac{k}{4}\chi_{E_2^k} + 4\chi_{F_2},
\end{equation}
where
\begin{eqnarray*}
F_2 &=& 4f^{-1}((4, \infty]) \\
E_2^k &=& f^{-1}\left(\frac{k}{4}, \frac{k+1}{4}\right)
\end{eqnarray*}
In a set like $s_2$, the $15$ terms of the sum are the $15$ rectangles which
approximate the area under $f$. Each rectangle has `width' $\mu(E_2^k)$ and
`height' $k/4$ while the last term has `width' $\mu(F_2)$ and `height' $4$.
We prove two properties of the sequence $\{s_n\}$ of simple functions.
\begin{prop}\label{s3p6}
$\{s_n\}$ is an monotone increasing and non-negative.
\end{prop}
\begin{proof}
Consider
\begin{eqnarray*}
s_n &=& \sum_{k=0}^{2^{2n}-1}\frac{k}{2^n}\chi_{E_n^k} + 2^n\chi_{F_n} \\
s_{n+1} &=& \sum_{k=0}^{2^{2n+2}-1}\frac{k}{2^{n+1}}\chi_{E_{n+1}^k} + 2^{n+1}\chi_{F_{n+1}}
\end{eqnarray*}
If $x \in X$ such that $f(x) > 2^{n+1}$, then $x \in F_{n+1} \subset F_n$ and 
$s_{n+1}(x) - s_n(x) = 2^{n+1} - 2^n > 0$.
If $x$ is such that $2^n < x < 2^{n+1}$ then $x \in F_n$ but $x \notin F_{n+1}$.
The smallest such $x$ will lie in
\[
f^{-1}\left(\left(\frac{2^{2n+1}}{2^{n+1}}, \frac{2^{2n+1} + 1}{2^{n+1}}\right]\right)
\]
which corresponds to $k = 2^{2n+1}$. Therefore,
\[
s_{n+1}(x) - s_n(x) = \frac{2^{2n+1}}{2^{n+1}} = 2^n + \frac{1}{2^{n+1}}
\]
and hence
\[
s_{n+1}(x) - s_n(x) = \frac{1}{2^{n+1}} > 0.
\]
We can follow the same steps for the entire range of $x$. Thus, $\{s_n\}$ is a
point-wise monotone increasing sequence of simple functions.

That $s_n$ is non-negative follows from the fact that the coefficients of terms
in the defining equation are positive.
\end{proof}

\begin{prop}\label{s3p7}
$s_n \rightarrow f$.
\end{prop}
\begin{proof}
Let $f(x) = (k + \delta)/2^n$ where $k$ is a positive integer and $0 < \delta < 1$
is a real. Then 
\[
x \in f^{-1}\left(\left(\frac{k}{2^n}, \frac{k+1}{2^n}\right]\right)
\]
so that
\[
s_n(x) = \frac{k}{2^n}
\]
and hence
\[
f(x) - s_n(x) = \frac{\delta}{2^n}.
\]
\end{proof}

\begin{defn}\label{s3d4}
Let $f:X \rightarrow \sor$ and $(X, \Sigma_X, \mu)$ be a measure space. If $f^{\pm}$
are defined as in the proof of proposition \ref{s2p6} then
\[
\int_X f d\mu = \int_X f^+ d\mu - \int_X f^-d\mu
\]
\end{defn}

\begin{prop}\label{s3p8}
Let $a = \sup\{x_n\}, b = \sup\{y_n\}$ then $\sup\{x_n + y_n\} = a + b$.
\end{prop}
\begin{proof}
Let $c = \sup\{x_n + y_n\}$. Then $a \ge x_n, b \ge y_n \Rightarrow a+ b \ge x_n + y_n
\Rightarrow a + b \ge c$. 

Let, if possible, $c > a + b$ or $c - b > a$. Since $a = \sup\{x_n\}$, there 
exists $\delta > 0$ such that $c - b > x_n + \delta$ for all $n \in \son$.
Therefore, $c - b + y_n > y_n + x_n + \delta \Rightarrow c - b + \sup\{y_n\}
> \sup\{x_n + y_n\} + \delta \Rightarrow c > \sup\{x_n + y_n\} + \delta$, or
that $c$ is not a supremum of $\{x_n + y_n\}$, a contradiction.
\end{proof}

\begin{prop}\label{s3p9}
Let $(X, \Sigma_X, \mu)$ be a measure space and $f, g:X \rightarrow [0, \infty]$ 
be measurable functions. Then,
\[
\int_X(f + g)d\mu = \int_X f d\mu + \int_X g d\mu.
\]
\end{prop}
\begin{proof}
Let $\{s_n\}$ and $\{t_n\}$ be simple functions with $X$ as the domain such that
\begin{eqnarray*}
\int_X f d\mu &=& \sup\left\{\int_X s_n d\mu \;|\; s_n \le f\right\} \\
\int_X g d\mu &=& \sup\left\{\int_X t_n d\mu \;|\; t_n \le f\right\} 
\end{eqnarray*}
If $s_n \le f$ and $t_n \le g$ then $s_n + t_n \le f + g$ and by proposition
\ref{s3p8}, $\sup\{s_n + t_n\} = \sup\{s_n\} + \sup\{t_n\}$. Now,
\[
\int_X fd\mu + \int_X gd\mu = \sup\left\{\int_X s_n d\mu + \int_X t_nd\mu\right\}
= \sup\left\{\int_X(s_n + t_n)d\mu\right\}
\]
where we used proposition \ref{s3p5}. The last term, by definition is the integral
of $f+g$.
\end{proof}

\begin{cor}\label{s3c1}
Proposition \ref{s3p9} holds good for $f, g: X \rightarrow \sor$.
\end{cor}
\begin{proof}
Let $f = f^+ - f^-$ and $g = g^+ - g^-$ then $f + g = (f^+ + g^+) - (f^- + g^-)
= (f+g)^+ - (f+g)^-$. From proposition \ref{s3p9},
\begin{eqnarray*}
\int_X(f^+ + g^+)d\mu &=& \int_X f^+ d\mu + \int_X g^+d\mu \\
\int_X(f^- + g^-)d\mu &=& \int_X f^- d\mu + \int_X g^-d\mu
\end{eqnarray*}
so that
\[
\int_X(f^+ + g^+)d\mu - \int_X(f^- + g^-)d\mu = \int_X f^+ d\mu - \int_X f^-d\mu
+ \int_X g^+d\mu - \int_X g^-d\mu
\]
from which the corollary follows.
\end{proof}

\begin{prop}\label{s3p10}
If $f \le g$, where $f$ and $g$ are non-negative valued measurable functions on 
$(X, \Sigma_X, \mu)$ then
\[
\int_X fd\mu \le \int_X gd\mu.
\]
\end{prop}
\begin{proof}
Let $\{s_n\}$ and $\{t_n\}$ be sequences of simple functions which approximate
$f$ and $g$. Then $s_n \le t_n$ for all but a finite number of $n$. For if not,
then their limits will not be related as $f \le g$. Therefore, by proposition
\ref{s3p4},
\[
\int_X s_n d\mu \le \int_X t_n d\mu
\]
for all but a finite number of $n$ so that
\[
\sup\left\{\int_X s_n d\mu\right\} \le \sup\left\{\int_X t_n d\mu\right\}
\]
which proves the proposition.
\end{proof}

\begin{cor}\label{s3c2}
Proposition \ref{s3p10} is true for measurable $f, g: X \rightarrow \sor$.
\end{cor}
\begin{proof}
If $f = f^+ - f^-$ and $g = g^+ - g^-$ then $f \le g \Rightarrow f^+ \le
g^+ \text{ and } g^- \le f^-$ from which the corollary follows.
\end{proof}

\begin{prop}\label{s3p11}
If $f: X \rightarrow \sor$ is a measurable function on the measure space $(X,
\Sigma_X, \mu)$ then
\[
\left|\int_X fd\mu\right| \le \int_X |f|d\mu.
\]
\end{prop}
\begin{proof}
\[
|f(x)| = \begin{cases}
f(x) & \text{ if } f(x) \ge 0 \\
-f(x) & \text{ if } f(x) < 0
\end{cases}
\]
so that
\[
|f(x)| = \begin{cases}
f^+(x) & \text{ if } f(x) \ge 0 \\
f^-(x) & \text{ if } f(x) < 0
\end{cases}
\]
where $f^+(x) = \max\{f(x), 0\}$ and $f^-(x) = -\min\{f(x), 0\}$, making
both functions non-negative. From this it is clear that $|f| = |f^+| + |f^-|
= f^+ + f^-$.
Now,
\[
\left|\int_X f d\mu\right| = \left|\int_X f^+ d\mu - \int_X f^- d\mu\right|.
\le \left|\int_X f^+ d\mu\right| + \left|\int_X f^- d\mu\right|.
\]
Since $f^+$ and $f^-$ are positive valued,
\[
\left|\int_X fd\mu\right| \le \int_X (f^+ + f^-)d\mu = \int_X|f| d\mu.
\]
\end{proof}

\begin{defn}\label{s3d5}
Let $(X, \Sigma_X, \mu)$ be a measure space. A set $E \in \Sigma_X$ is 
said to be a measure-zero set if $\mu(E) = 0$.
\end{defn}

\begin{defn}\label{s3d6}
A property $P$ over a set $X$ is set to be true almost everywhere if it is 
false on a measure-zero set. That is, if $E = \{x \in X \;|\; P(x) \text{ is
false}\}$ then $\mu(E) = 0$.
\end{defn}

\begin{prop}\label{s3p12}
Let $(X, \Sigma_X, \mu)$ be a measure space and $E \in \Sigma_X$ be a measure-zero
set. Then, $\int_E fd\mu = 0$.
\end{prop}
\begin{proof}
Let $f$ be approximated by the sequence $\{s_n\}$ of simple functions. Then the
restriction of $f$ to $E$ too will be approximated the restriction of $s_n$ to
$E$. If $E_1, \ldots, E_k$ partition $E$ then
\[
\int_E s_n d\mu = \sum_{k=1}^n a_k \mu(E_k).
\]
Since $E_1, \ldots, E_k$ partition $E$, $\mu(E) = \mu(E_1) + \cdots \mu(E_n)$.
As $\mu(E) = 0$, so are $\mu(E_k)$ for $k=1, \ldots, n$ making
\[
\int_E s_n d\mu = 0.
\]
Since,
\[
\int_E f d\mu = \sup\left\{\int s_n d\mu \;|\; s_n \le f\right\}
\]
the integral of $f$ over $E$ vanishes.
\end{proof}

\begin{prop}\label{s3p13}
Let $(X, \Sigma_X, \mu)$ be a measure space and the sets $A$ and $B$ partition
$X$. Then,
\[
\int_X fd\mu = \int_A f d\mu + \int_B fd\mu.
\]
\end{prop}
\begin{proof}
Let $s$ be a simple function on the measure space and $E_1, \ldots, E_m, E_{m+1},
\ldots, E_n$ partition $X$ in such a way that $E_1, \ldots, E_m$ partition $A$
and the remaining ones partition $B$. Then
\[
\int_X sd\mu = \sum_{k=1}^n a_k \mu(E_k) = \sum_{k=1}^m a_k \mu(E_k) + 
\sum_{k=m+1}^n a_k\mu(E_k) = \int_A sd\mu + \int_B sd\mu.
\]
Therefore,
\begin{eqnarray*}
\int_X fd\mu &=& \sup\left\{\int_X s_n d\mu\right\} \\
 &=& \sup\left\{\int_A s_n d\mu + \int_B s_n d\mu\right\} \\
 &=& \sup\left\{\int_A s_n d\mu\right\} + \sup\left\{\int_B s_n d\mu\right\} \\
 &=& \int_A fd\mu + \int_B fd\mu.
\end{eqnarray*} 
\end{proof}

\begin{prop}\label{s3p14}
Let $(X, \Sigma_X, \mu)$ be a measure space. A measurable function $f:X 
\rightarrow [0, \infty]$ vanishes almost everywhere if $\int_X fd\mu = 0$.
\end{prop}
\begin{proof}
Let $A$ be the set of points on which $f$ does not vanish. Then
\[
\int_X f d\mu = \int_A fd\mu + \int_{A^c}fd\mu.
\]
Since $\mu(A) = 0$, the first integral vanishes. Since $f = 0$ on $A^c$ the
second one vanishes.

Now let $\int_X f d\mu = 0$. Let $A$ be the subset of $X$ on which $f$ does
not vanish. Then $f$ vanished on $A^c$. Further,
\[
\int_X fd\mu = \int_A fd\mu = 0.
\]
Now,
\[
\int_A fd\mu = \sup\left\{\int_A s_n d\mu\right\} =
\sup\left\{\sum_{k=1}^n a_k\mu(E_k)\right\} = 0,
\]
for a suitable partition $E_1, \ldots E_n$ of $A$ and $a_k > 0$. The only way
a supremum of non-negative points will be zero is when all points are zero,
which can happen only if $\mu(E_k) = 0$ for all $k = 1, \ldots, n$, which in
turn implies that $\mu(A) = 0$.
\end{proof}

\section{Convergence theorems}\label{c4}
Before proving the monotone convergence theorem for Lebesgue integrals of a
sequence of measurable functions, we will prove a similar theorem for sequences
of numbers.
\begin{thm}\label{c4t1}
Let $\{a_n\}$ be a non-decreasing sequence of real numbers which is bounded 
above. Then $\{a_n\}$ converges to its supremum.
\end{thm}
\begin{proof}
Since $\{a_n\}$ is a sequence of real numbers that is bounded above, it has a
supremum, say $A$. We will show that $\lim a_n = A$. Fix an $\epsilon > 0$.
Since $A$ is the supremum of $\{a_n\}$, there exists an $N \in \son$ for which
$|A - a_N| < \epsilon$. Since $\{a_n\}$ is a non-decreasing sequence, we also
have $|A - a_n| < \epsilon$ for all $n \ge N$ so that $A$ is also the limit of
the sequence.
\end{proof}

\begin{prop}\label{c4p1}
Let $(X, \Sigma_X, \mu)$ be a measure space and $\{f_n\}$ be a sequence of
measurable functions on $X$. If $\lim f_n = f$ point-wise then $f$ is
measurable.
\end{prop}
\begin{proof}
By proposition \ref{s2p4}, $\limsup f_n$ and $\liminf f_n$ are measurable.
Since $\lim f_n = f$, $\limsup f_n = \liminf f_n = f$.
\end{proof}

Analogous to this theorem, we have
\begin{thm}[Monotone Convergence Theorem]\label{s4t2}Let $(X, \Sigma_X, \mu)$ be a 
measure space and $\{f_n\}$ be a sequence of measurable functions which 
converges to $f$. Then 
\[
\lim_{n\rightarrow\infty}\int_X f_n d\mu = \int_X fd\mu.
\]
\end{thm}
\begin{proof}
Given that $\lim f_n = f$, therefore, $\limsup f_n = \liminf f_n = \lim f_n = f$.
Since $f_n$ are measurable, by proposition \ref{s2p4}, $f$ is measurable and
we can define its Lebegue integral over $X$. As $\{f_n\}$ are a monotone
increasing sequence,
\begin{equation}\label{s4e1}
\int_X f_n d\mu \le \int_X fd\mu.
\end{equation}
Let 
\[
\int_X fd\mu = \sup\left\{\int_X s d\mu \;|\; s \in S_f\right\},
\]
where $S_f$ is the set of simple functions $X \rightarrow \sor$ such that
$0 \le s \le f$. Fix a function $s \in S_f$ and let $\lambda \in (0, 1)$. Define
\[
A_n = \{x \in X \;|\; f_n(x) - \lambda s(x) \ge 0\}.
\]
As $n$ increases, and since $\{f_n\}$ are an increasing sequence of functions
whoe limit is $f$, the domain of $A_n$ increases with $n$, that is $\{A_n\}$ 
is a sequence of sets such that $A_n \subseteq A_{n+1}$. Clearly,
\begin{equation}\label{s4e2}
\bigcup_n A_n \subseteq X.
\end{equation}
Let $x_0$ be any element of $X$. There will be an $m \in \son$ such that for
all $n \ge m$, $f_n(x_0) - \lambda s(x_0) \ge 0$. This is because $f_n \rightarrow
f$ and $s \in S_f$. Therefore, $x_0 \in A_n \forall n \ge m$ or that
\[
\bigcup_n A_n \subseteq X.
\]
\begin{equation}\label{s4e3}
X \subseteq \bigcup_n A_n.
\end{equation}
From equations \eqref{s4e2} and \eqref{s4e3} we have
\[
X = \bigcup_n A_n.
\]

For $E \in \Sigma_X$, define
\[
\nu(E) = \int_E \lambda s d\mu.
\]
Clearly, $\nu$ is a measure on $(X, \Sigma_X)$. Now,
\[
\int_X \lambda s d\mu = \nu(X) = \nu\left(\bigcup_n A_n\right).
\]
As $\{A_n\}$ are in increasing sequnce of sets the last term in the above equation
can be written as a limit and we get
\[
\int_X \lambda s d\mu = \lim_{n \rightarrow \infty}\nu(A_n)
\]
or
\[
\int_X \lambda s d\mu = \lim_{n \rightarrow \infty}\int_{A_n}\lambda s d\mu.
\]
Since $\lambda \in (0, 1)$ and $s \in S_f$, $\lambda s \le f_n$ so that
\[
\int_X \lambda s d\mu \le \lim_{n \rightarrow \infty}\int_{A_n}f_n d\mu
\le \lim_{n \rightarrow \infty}\int_X f_n d\mu.
\]
In the limit $\lambda \rightarrow 1$, this equation is
\[
\int_X \lambda s d\mu \le \lim_{n \rightarrow \infty}\int_X f_n d\mu.
\]
Taking supremum over all $s \in S_f$, we see that
\begin{equation}\label{s4e4}
\int_X f d\mu \le \lim_{n \rightarrow \infty}\int_X f_n d\mu.
\end{equation}
From equations \eqref{s4e1} and \eqref{s4e4}, we get
\[
\int_X f d\mu = \lim_{n \rightarrow \infty}\int_X f_n d\mu.
\]
\end{proof}

\begin{prop}\label{s4p2}
Let $(X, \Sigma_X, \mu)$ be a measure space and $f, g: X \rightarrow [0, \infty]$
be measurable functions. Then
\[
\int_X(f + g)d\mu = \int_X f d\mu + \int_X g d\mu.
\]
\end{prop}
\begin{proof}
Using propositions \ref{s3p6} and \ref{s3p7} we know that for any measurable
function we can find a monotonically increasing sequence of simple functions
which converges to it. Let $\{s_n\}$ and $\{t_n\}$ be monotonically increasing
functions such that $s_n \rightarrow f$ and $t_n \rightarrow g$. By monotone
convergence theorem,
\begin{eqnarray*}
\int_X f d\mu &=& \lim_{n \rightarrow \infty} \int_X f_n \mu \\
\int_X g d\mu &=& \lim_{n \rightarrow \infty} \int_X g_n \mu
\end{eqnarray*}
so that
\[
\int_X fd\mu + \int_X gd\mu = \lim_{n \rightarrow \infty} \int_X f_n d\mu +
\int_X g_n d\mu.
\]
Using the linearity property of Lebesgue integral of simple functions proved in
proposition \ref{s3p5}, we can write the above equation as
\[
\int_X fd\mu + \int_X gd\mu = \lim_{n \rightarrow \infty} \int_X (f_n + g_n) d\mu
\]
If $f_n \rightarrow f$ and $g_n \rightarrow g$ then, as the monotone convergence
theorem permits us to interchange the order of the limit and the integral, the
right hand side of the previous equation can be changed as
\[
\int_X fd\mu + \int_X gd\mu = \int_X (f + g)d\mu.
\]
\end{proof}

\begin{cor}\label{s4c1}
Let $f, g: X \rightarrow \sor$ be measurable on $(X, \Sigma_X, \mu)$ then
\[
\int_X(f + g)d\mu = \int_X f d\mu + \int_X g d\mu.
\]
\end{cor}
\begin{proof}
Follows immediately from proposition \ref{s2p1} after writing $f = f^+ - f^-$
and $g = g^+ - g^-$.
\end{proof}

\begin{thm}[Beppo Levi]\label{s4t3}
Let $\{f_n\}$ be a sequence of measurable, non-negative functions on $(X, 
\Sigma_X, \mu)$. Then
\[
\int_X \lim_{n \rightarrow \infty}f_n d\mu = 
\lim_{n \rightarrow \infty}\int_X f_n d\mu.
\]
Note that $\{f_n\}$ need not be monotone increasing.
\end{thm}
\begin{proof}
Define 
\[
g_n(x) = \sum_{k=1}^n f_n(x)
\]
so that $\{g_n\}$ is a monotone increasing sequence. Then,
\[
\lim_{n \rightarrow \infty}\sum_{k=1}^n f_nx(x) = \lim_{n \rightarrow \infty}g_n(x)
\]
so that by the monotone convergence theorem,
\[
\int_X \lim_{n \rightarrow \infty} g_n d\mu = \lim_{n \rightarrow \infty}\int_X
g_n d\mu.
\]
Substituting for $g_n$ proves the theorem.
\end{proof}

\begin{prop}[Fatou's lemma] Let $f_n: X \rightarrow [0, \infty]$ be measurable
on $(X, \Sigma_X, \mu)$. Then,
\[
\liminf\int_X f_n d\mu \ge \int_X\liminf f_n d\mu.
\]
\end{prop}
\begin{proof}
Since $\liminf f_n = \sup_n\inf{k \ge n} f_k(x)$, define $g_n(x) = \inf_{k \ge n}
f_k(x)$ so that $\{g_n\}$ is a monotonically increasing sequence of functions. 
Furthermore, from its definition, it immediately follows that $g_n \le f_n$ and
$\liminf f_n = \sup_n g_n$. For a monotone bounded sequence (all monotone sequences
if we are working with extended real numbers), the supremum is also the limit.
Therefore, $\liminf f_n = \lim g_n$ and hence,
\[
\int_X\liminf f_n d\mu = \int_X\lim g_n d\mu.
\]
Since $\{g_n\}$ is monotone increasing, we can use the monotone convergence theorem
to interchange the order of the integral and the limit so that
\[
\int_X\liminf f_n d\mu = \lim\int_X g_n d\mu.
\]
When a limit exists it is equal to $\liminf$ (and $\limsup$) so that
\[
\int_X\liminf f_n d\mu = \liminf\int_X g_n d\mu \le \liminf\int_X f_n d\mu.
\]
\end{proof}

\begin{defn}\label{s4d1}
A measurable function $f: X \rightarrow \sor$ on a measure space $(X, \Sigma_X, \mu)$
is said to be integrable if
\[
\int_X|f|d\mu < \infty.
\]
\end{defn}

\begin{cor}\label{s4c2}
If $f$ is measurable and $|f| < K$, $K > 0$, then it is integrable.
\end{cor}
\begin{proof}
If $f$ is measurable then $\int_X fd\mu$ exists, although it is permitted to have
an infinite value. If $f$ is bounded then $\int_X |f| d\mu \le K\mu(X) < \infty$.
\end{proof}
\begin{rem}
I think there is an implicit assumption that $\mu(X) < \infty$.
\end{rem}

\begin{thm}[Dominated Convergence Theorem]\label{s4t4} Let $(X, \Sigma_X, \mu)$
be a measure space and $f_n:X \rightarrow \sor$ be measurable functions converging
to $f$. If there is an integrable function $g: X \rightarrow \sor$ such that $|f_n|
\le g$ then $f_n$ and $f$ are also integrable and 
\[
\lim_{n \rightarrow \infty}\int_X |f_n - f|d\mu = 0.
\]
\end{thm}
\begin{proof}
Since $f_n \rightarrow f$ and $|f_n| \le g$, by corollary \ref{s4c2}, $f_n$ and
$f$ are integrable. Since $g$ too is integrable, so is $2g - |f_n - f|$. 
Applying Fatou's lemma \ref{s3p4} to $\{2g - |f_n - f|\}$ we get
\[
\int_X\liminf (2g - |f_n - f|) d\mu \le \liminf\int_X (2g - |f_n - f|)d\mu.
\]
Since $f_n \rightarrow f$, $\liminf(2g - |f_n - f|) = 2g$ and
\begin{eqnarray*}
\int_X 2g d\mu &\le& \liminf\left(\int_X 2g d\mu - \int_X |f_n - f|d\mu\right) \\
 &\le& \int_X 2g d\mu + \liminf\left(-\int_X|f_n - f|d\mu\right) \\
 &\le& \int_X 2g d\mu - \limsup\int_X|f_n - f|d\mu.
\end{eqnarray*}
Since $g$ is integrable, $\int_X 2g d\mu$ is finite and hence, we have,
\[
0 \le -\limsup\int_X|f_n - f|d\mu \Rightarrow \limsup\int_X|f_n - f|d\mu <= 0.
\]
If $\limsup$ of a sequence of non-negative reals is less than or equal to $0$
then the sequence converges to $0$. Therefore,
\[
\lim_{n \rightarrow \infty}\int_X |f_n - f|d\mu = 0.
\]
\end{proof}

\begin{cor}\label{s4c3}
Under the hypotheses of the dominated convergence theorem \ref{s4t4},
\[
\lim_{n \rightarrow \infty}\int_X f_n d\mu = \int_X fd\mu.
\]
\end{cor}
\begin{proof}
The dominated convergence theorem gives
\[
\lim_{n \rightarrow 0}\int_X |f_n - f|d\mu = 0.
\]
so that
\[
\lim_{n \rightarrow \infty}\left|\int_X (f_n - f)d\mu\right| \le 0.
\]
As the limit involves a sequence of non-negative numbers, we can as well write,
\[
\lim_{n \rightarrow \infty}\left|\int_X (f_n - f)d\mu\right| = 0.
\]
Therefore,
\[
\lim_{n \rightarrow \infty}\int_X (f_n - f)d\mu = 0 \text{ and }
\lim_{n \rightarrow \infty}\int_X (f - f_n)d\mu = 0 
\]
both of which lead to
\[
\lim_{n \rightarrow \infty}\int_X f_n d\mu = \int_X fd\mu.
\]
\end{proof}

We will now prove some additional theorems whose validity depends on the convergence
theorems.
\begin{thm}\label{s4t5}
Let $(X, \Sigma, \mu)$ be a measure space and $f_n: X \rightarrow \sor$ be measurable
functions such that
\[
\int_X\sum|f_n| d\mu= \sum\int_X |f_n| d\mu < \infty.
\]
Then
\[
\int_X\sum f_n d\mu= \sum\int_X f_n d\mu.
\]
\end{thm}
\begin{proof}
Let 
\[
g_n = \sum_{k=1}^n f_n, g = \limsup g_n, h = \sum_{k=1}^\infty |f_k|.
\]
Since $\int h d\mu < \infty$ we must also have $|h| < \infty$ almost everywhere.
Therefore, the series $\sum_k f_k$ is absolutely convergent almost everywhere so
that the sequence $\{g_n\}$ converges to $g$ almost everywhere.

We have an integrable function $h$ that dominates the sequence $\{g_n\}$ so that
by corollary \ref{s4c3},
\[
\lim_{n \rightarrow \infty}\int_X g_n d\mu = \int_X gd\mu.
\]
Substituting for $g_n$ proves the theorem.
\end{proof}

We need a few propositions to prove the next theorem.
\begin{prop}\label{s4p4}
Let $(X, \Sigma, \mu)$ be a measure space and $s$ be a real-valued simple function
on $X$. If $E_1$ and $E_2$ are disjoint subsets of $X$ and if $E = E_1 \cup E_2$
then
\[
\int_E sd\mu = \int_{E_1} sd\mu + \int_{E_2}sd\mu.
\]
\end{prop}
\begin{proof}
\[
\int_E sd\mu = \sum_{k=1}^n a_k\mu(F_k),
\]
where the sets $F_k \subset E$, partition $E$. Without loss of generality, choose
the partition $\{F_k\}$ such that $F_1, \ldots, F_m$ partition $E_1$ and $F_{m+1},
\ldots, F_n$ partition $E_2$. Then,
\[
\int_E sd\mu = \sum_{k=1}^m a_k\mu(F_k) + \sum_{k=m+1}^n a_k\mu(F_k) =
\int_{E_1}sd\mu + \int_{E_2}sd\mu.
\]
\end{proof}

\begin{prop}\label{s4p5}
Let $(X, \Sigma, \mu)$ be a measure space and $f: X \rightarrow [0, \infty]$ be
a function on $X$. If $E_1$ and $E_2$ are disjoint subsets of $X$ and if $E = 
E_1 \cup E_2$ then
\[
\int_E fd\mu = \int_{E_1} fd\mu + \int_{E_2}fd\mu.
\]
\end{prop}
\begin{proof}
Let
\[
\int_E fd\mu = \sup\left\{\int_E sd\mu\;\Big|\; s \le f, s:X \rightarrow [0, \infty] 
\text{ is simple.}\right\}
\]
By proposition \ref{s4p4},
\begin{eqnarray*}
\int_E fd\mu &=& \sup\left\{\int_{E_1}sd\mu + \int_{E_2}sd\mu\right\} \\
 &=& \sup\left\{\int_{E_1}sd\mu\right\} + \sup\left\{\int_{E_2}sd\mu\right\} \\
 &=& \int_{E_1} fd\mu + \int_{E_2}fd\mu.
\end{eqnarray*}
We used proposition \ref{s3p8} to get to the second step.
\end{proof}

\begin{cor}\label{s4c4}
Proposition \ref{s4p5} is also true for $f: X \rightarrow \sor$.
\end{cor}
\begin{proof}
Follows immediately after writing $f = f^+ - f^-$ where $f^{\pm}$ are defined as
in the proof of proposition \ref{s2p6}.
\end{proof}

\begin{prop}\label{s4p6}
Let $(X, \Sigma, \mu)$ be a measure space, $s$ be a simple function on $X$
and $f: X \rightarrow [0, \infty]$ be a measurable function. If $E$ is an empty
set then $\int_E sd\mu = 0$ and $\int_E fd\mu = 0$.
\end{prop}
\begin{proof}
\[
\int_E sd\mu = a\mu(E) = a \times 0,
\]
as $\mu(\varnothing) = 0$.
For the same reason, $\int_E fd\mu = 0$.
\end{proof}

\begin{cor}\label{s4c5}
Proposition \ref{s4p6} is also true for $f: X \rightarrow \sor$.
\end{cor}
\begin{proof}
Follows immediately after writing $f = f^+ - f^-$ where $f^{\pm}$ are defined as
in the proof of proposition \ref{s2p6}.
\end{proof}

\begin{thm}\label{s4t6}
Let $(X, \Sigma, \mu)$ be a measure space and $g: X \rightarrow [0, \infty]$ be an
integrable function. Define,
\[
\nu(E) = \int_E gd\mu,
\]
for $E \in \Sigma$. Then $\nu$ is a measure on $(X, \Sigma)$ and for any
measurable function $f$ on $X$,
\[
\int_X fd\nu = \int_X fgd\mu.
\]
\end{thm}
\begin{proof}
By proposition \ref{s4p6}, $\nu(\varnothing) = 0$. Let $E_1, E_2, \ldots$ be
pairwise disjoint. Then by extending proposition \ref{s4p5} to countable unions,
we get 
\[
\nu(E) = \sum_{k=1}^\infty \mu(E_k).
\]
Thus, $\nu: \Sigma \rightarrow [0, \infty]$ is indeed a measure. Let $s:X \rightarrow
[0, \infty]$ be a simple function
\[
s = \sum_{k=1}^\infty a_k\chi_{E_k},
\]
and
\begin{eqnarray*}
\int_X sd\nu &=& \sum_{k=1}^n a_k\nu(E_k) \\
 &=& \sum_{k=1}^n a_k\int_{E_k}gd\mu \\
 &=& \sum_{k=1}^n a_k\int_X \chi_{E_k}gd\mu \\
 &=& \int_X\sum_{k=1}^na_k\chi_{E_k}gd\mu
\end{eqnarray*}
that is,
\[
\int_X sd\mu = \int_X sgd\mu.
\]
Let $S_f$ be the set of simple functions $X \rightarrow \sor$ such that
$0 \le s \le f$. 
\begin{eqnarray*}
\int_X fd\nu &=& \sup\left\{\int_X s d\nu \;\Big|\; s \in S_f\right\} \\
 &=& \sup\left\{\int_X s gd\mu \;\Big|\; s \in S_f\right\} \\
 &=& \int_X fg d\mu.
\end{eqnarray*}
\end{proof}

\begin{thm}(Change of variables)\label{s4t7}
Let $(X, \Sigma_X, \mu)$ and $(Y, \Sigma_Y, \nu)$ be a measure spaces. If $g:X
\rightarrow Y$ and $f: Y \rightarrow \sor$ are measurable functions then
\[
\int_X (f \circ g)d\mu = \int_Y fd\nu
\]
where $\nu(E) = \mu(g^{-1}(E))$ for any $E \in \Sigma_Y$.
\end{thm}
\begin{proof}
Let $f = \chi_F$ for $F \subset Y$. Then $(f \circ g)(x) = \chi_F(g(x)) = 1$ iff
$g(x) \in F$. Therefore,
\begin{equation}\label{s4e5}
\int_X (f \circ g) d\mu = \int_X \chi_F(g(x))d\mu = \mu(g^{-1}(F))
\end{equation}
and
\begin{equation}\label{s4e6}
\int_Y fd\nu = \int_Y\chi_F d\nu = \nu(F).
\end{equation}
Since we are given that $\nu(F) = \mu(g^{-1}(F)$ for $F \in \Sigma_Y$, we have
\begin{equation}\label{s4e7}
\int_X (f \circ g) d\mu = \int_Y fd\nu,
\end{equation}
for $f = \chi_F, F \in \Sigma_Y$. Now consider a simple function,
\[
t = \sum_{k}b_k\chi_{F_k},
\]
where $\{F_k\}$ partition $Y$. Then,
\begin{equation}\label{s4e8}
\int_Y td\nu = \int_Y \sum_k b_k \chi_{F_k} = \sum_k b_k \nu(F_k) = 
\sum_k b_k\mu(g^{-1}(F_k)),
\end{equation}
and
\begin{equation}\label{s4e9}
\int_X (t \circ g)d\mu = \sum_k b_k\int_X (\chi_{F_k} \circ g)f\mu = 
\sum_k b_k\mu(g^{-1}(F_k))
\end{equation}
so that once again we have
\begin{equation}\label{s4e10}
\int_X (t \circ g) d\mu = \int_Y td\nu.
\end{equation}
Finally, let $\{t_n\}$ be a monotone increasing sequence of simple functions
on $Y$ that converges point-wise to $f$. Then by the monotone convergence
theorem \ref{s4t2}
\[
\int_Y fd\nu = \lim_{n \rightarrow \infty}\int_Y t_n d\nu = 
\lim_{n \rightarrow \infty}\int_X (t_n \circ g)d\mu,
\]
where we used \eqref{s4e10} in the second step. Using \ref{s4t2} again, we get
\[
\int_Y fd\nu = \int_X\lim_{n \rightarrow \infty}(t_n \circ g)d\mu.
\]
If $t_n \rightarrow f$ then $t_n \circ g \rightarrow f \circ g$ so that
\[
\int_Y fd\nu = \int_X (f \circ g)d\mu.
\]
When the range of $f$ is a subset of $\sor$, we can apply the previous equation
to $f^{\pm}$ separately and arrive at the same conclusion.
\end{proof}

\begin{prop}\label{s4p7}
Let $f: X \rightarrow \sor$ be continuous at $x \in X$. Then there is a sequence
$\{x_n\}$ such that $f(x_n) \rightarrow f(x)$.
\end{prop}
\begin{proof}
Fix $\epsilon > 0$. If $f$ is continuous at $x$ then there exists $\delta > 0$
such that $|x - x^\op| < \delta \Rightarrow |f(x) - f(x^\op)| < \epsilon$. Since
$\{x_n\} \rightarrow x$, for a given $\delta > 0$, there is an $n_0 \in \son$ 
such that for all $n \ge n_0$, $|x_n - x| < \delta$. By continuity of $f$ at $x$
this also means that $f(x_n) - f(x)| < \epsilon$ so that $\{f(x_n)\} \rightarrow
f(x)$.
\end{proof}

\begin{prop}\label{s4p8}
If $\{x_n\} \rightarrow x \Rightarrow \{f(x_n)\} \rightarrow f(x)$ then $f$ is 
continuous at $x$.
\end{prop}
\begin{proof}
$\{x_n\} \rightarrow x \Rightarrow \exists N \in \son$ such that for all $n \ge
N$, $|x_n - x| \rightarrow \delta$. $\{f(x_n)\} \rightarrow f(x) \Rightarrow 
\exists M \in \son$ such that for all $n \ge M$, $|f(x_n) - f(x)| < \epsilon$.
If $N_0 = \max\{N, M\}$ then for all $n \ge N_0$, $|x_n - x| < \delta 
\Rightarrow |f(x_n) - f(x)| < \epsilon$, that is $f$ is continuous at $x$.
\end{proof}

From propositions \ref{s4p7} and \ref{s4p8} it follows that
\begin{thm}\label{s4t8}
$\{x_n\} \rightarrow x \Rightarrow \{f(x_n)\} \rightarrow f(x)$ iff $f$ is 
continuous at $x$.
\end{thm}

\begin{thm}[Fundamental theorem of Calculus]\label{s4t9} Let $I \subset \sor$ be
an interval and $f: I \rightarrow \sor$ be integrable. If $I(x) = [a, x]$ then 
the function,
\[
F(x) = \int_{I(x)} fd\mu,
\]
is continuous and $F^\prime(x) = f(x)$. Here $\mu(I(x)) = x - a$. Moreover, if
$f$ is continuous at $x$ then $F^\op(x) = f(x)$.
\end{thm}
\begin{proof}
Let $\{x_n\} \rightarrow x$ and consider
\[
F(x_n) = \int_{I(x_n)}fd\mu = \int_\sor f\chi_{I(x_n)}d\mu.
\]
Since $|f\chi_{I(x_n)}| < f$, by the dominated convergence theorem \ref{s4t4},
\[
\lim_{n \rightarrow \infty}F(x_n) = \int_\sor\lim_{n \rightarrow \infty}
f\chi_{I(x_n)}d\mu = \int_\sor f\chi_{I(x)} d\mu = \int_{I(x)}fd\mu = F(x).
\]
This proves continuity of $F$ using theorem \ref{s4t8}.

Consider 
\[
\frac{F(x+h) - F(x)}{h} = \frac{1}{h}\int_{(x, x+h)}f d\mu,
\]
where we used proposition \ref{s4p5}. Since $f$ is continuous at $x$
$|f(x^\op) - f(x)| < \epsilon$ for all $x^\op \in (x, x + h)$. Therefore,
$-\epsilon < f(x^\op) - f(x) < \epsilon$ for all $x^\op \in (x, x+h)$ so that
\[
\frac{F(x+h) - F(x)}{h} < \frac{f(x) + \epsilon}{h}\int_{(x, x+h)} d\mu < f(x)
+ \epsilon.
\]
For a given $\epsilon > 0$. due to continuity of $f$, we can always choose $h>0$
so that this is true. Therefore $F^\op(x) = f(x)$.
\end{proof}

\begin{prop}
Let $f: X \rightarrow \sor$ be a measurable function and $(a, b) \subset X$. 
Then,
\[
\int_{(a, b)} f(x + h) d\mu = \int_{(a+h, b+h)}f(x) d\mu.
\]
\end{prop}
\begin{proof}
Define $t: X \rightarrow X$ such that $t(x) = (x + h)$. Then $f(x + h) = f(t(x))
= (f \circ t)(x)$. For any $(a, b) \in \Sigma_X$, $\mu(t^{-1}((a, b))) = \mu((
a-h, b-h)) = b - h - a + h = b - a = \mu((a, b))$. Therefore, by theorem 
\ref{s4t7},
\[
\int_{(a, b)} (f \circ t)d\mu = \int_{(a+h, b+h)} fd\nu = \int_{(a+h, b+h)}fd\mu
\]
as we just showed that $\mu$ is invariant under $t$.
\end{proof}
\end{document}
